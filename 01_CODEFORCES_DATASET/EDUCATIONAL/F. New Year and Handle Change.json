{"link": "https://codeforces.com//contest/1279/problem/F", "problemId": "504278", "problem_idx": "F", "shortId": "1279F", "contest_number": "1279", "problem_submissions": {"E": [67737947, 67733364, 67730576, 67739828, 67742536, 67737172, 67724903, 67736976, 67729524, 67727105, 67747837, 67731683, 67732984, 67748535, 67744932], "F": [67737545, 67718265, 67764598, 67761358, 67761175, 67737082, 67725475, 67770261, 67748335, 67724855, 67743206, 67734760, 67745652, 67744739, 67715547, 67721155, 67752838, 67725507, 67753025, 67734101, 67763755, 67725445, 67752215, 67728799, 67734922, 67753488], "D": [67712365, 67710004, 67715225, 67711743, 67720035, 67741233, 67733656, 67738820, 67706683, 67710710, 67712344, 67716189, 67712742, 67717775, 67716646, 67717595, 67717233, 67714949, 67709766], "C": [67708271, 67707793, 67712401, 67706993, 67715784, 67738909, 67733706, 67739694, 67710632, 67708442, 67708816, 67712768, 67706695, 67710203, 67712897, 67713466, 67711730, 67709788, 67706084], "B": [67703572, 67702979, 67708187, 67704555, 67708809, 67737826, 67733752, 67740661, 67706039, 67703968, 67706335, 67709187, 67703627, 67705748, 67708508, 67710463, 67705061, 67706427, 67703535], "A": [67701146, 67701133, 67701117, 67701163, 67704539, 67735636, 67733784, 67741171, 67702120, 67701143, 67701243, 67701332, 67701184, 67701399, 67702929, 67702323, 67701558, 67701229, 67701070]}, "name": "F. New Year and Handle Change", "statement": "New Year is getting near. So it\u2019s time to change handles on codeforces.\r\nMishka wants to change his handle but in such a way that people would\r\nnot forget who he is.To make it work, he only allowed to change letters\r\ncase. More formally, during handle change he can choose any segment of\r\nhis handle [i; i + l - 1] and apply or to all letters of his handle on\r\nthis segment (more fomally, replace all uppercase letters with\r\ncorresponding lowercase or vice versa). The length l is fixed for all\r\nchanges.Because it is not allowed to change codeforces handle too often,\r\nMishka can perform at most k such operations. What is the value of\r\nmin(lower, upper) (where lower is the number of lowercase letters, and\r\nupper is the number of uppercase letters) can be obtained after optimal\r\nsequence of changes?\r\n", "solutions": ["#include <cmath>\n#include <iostream>\n#include <vector>\n#include <algorithm>\n#include <string>\n#include <set>\n#include <map>\n#include <list>\n#include <time.h>\n#include <math.h>\n#include <random>\n#include <deque>\n#include <queue>\n#include <cassert>\n#include <unordered_map>\n#include <unordered_set>\n#include <iomanip>\n#include <bitset>\n#include <sstream>\n#include <chrono>\n#include <cstring>\n \nusing namespace std;\n \ntypedef long long ll;\n \n#ifdef iq\n  mt19937 rnd(228);\n#else\n  mt19937 rnd(chrono::high_resolution_clock::now().time_since_epoch().count());\n#endif\n \nint main() {\n#ifdef iq\n  freopen(\"a.in\", \"r\", stdin);\n#endif\n  ios::sync_with_stdio(0);\n  cin.tie(0);\n  int n, k, l;\n  cin >> n >> k >> l;\n  string s;\n  cin >> s;\n  vector <int> ret;\n  for (auto c : s) {\n    if ('a' <= c && c <= 'z') ret.push_back(0);\n    else ret.push_back(1);\n  }\n  const ll inf = (ll) (1e18) + 7;\n  ll ans = n;\n  for (int t = 0; t < 2; t++) {\n    auto f = [&] (int m) {\n      vector <pair <ll, int> > dp(n, make_pair(inf, 0));\n      for (int i = 0; i < n; i++) {\n        {\n          auto go = (i >= l ? dp[i - l] : make_pair(0ll, 0));\n          go.first += m;\n          go.second++;\n          dp[i] = min(dp[i], go);\n        }\n        {\n          auto go = (i > 0 ? dp[i - 1] : make_pair(0ll, 0));\n          go.first += ret[i];\n          dp[i] = min(dp[i], go);\n        }\n      }\n      return dp[n - 1];\n    };\n    if (f(0).second <= k) {\n      ans = min(ans, f(0).first);\n    } else {\n      int l = 0, r = n + 228;\n      while (l < r - 1) {\n        int mid = (l + r) / 2;\n        if (f(mid).second <= k) {\n          r = mid;\n        } else {\n          l = mid;\n        }\n      }\n      auto go = f(r);\n      ans = min(ans, go.first - r * (ll) k);\n    }\n    for (int &x : ret) {\n      x ^= 1;\n    }\n  }\n  cout << ans << '\\n';\n}"], "input": "", "output": "", "tags": ["binary search", "dp"], "dificulty": "2800", "interactive": false}