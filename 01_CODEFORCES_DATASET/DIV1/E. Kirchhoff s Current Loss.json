{"link": "https://codeforces.com//contest/1280/problem/E", "problemId": "495764", "problem_idx": "E", "shortId": "1280E", "contest_number": "1280", "problem_submissions": {"E": [66917544, 66918710, 66922267, 66921342, 66922263, 66926965, 66926660, 66927067, 66925334, 66928850, 66995264, 66984642, 66984352, 66984306, 66929552, 66927288, 66928819, 66918756, 67988551, 66935139, 67027185, 66930594], "D": [66910755, 66913056, 66911496, 66913696, 66913107, 66913708, 66913839, 66916865, 66916639, 66915491, 66986758, 66986656, 66986610, 66986506, 66986162, 66985974, 66985915, 66985866, 66985681, 66985603, 66985529, 66917639, 66918143, 66919046, 66912800, 66915483, 66915027, 67988467, 66920051, 66917432, 66918759, 66917692], "C": [66906002, 66909093, 66907333, 66908961, 66908129, 66909339, 66908240, 66909052, 66911854, 66908829, 66908393, 66909027, 66913164, 66908797, 66903678, 66908260, 67988454, 66908965, 66910137, 66910802, 66910959], "B": [66904540, 66906897, 66902891, 66906439, 66906232, 66906362, 66905756, 66906434, 66909740, 66905894, 66905319, 66906149, 66910474, 66930936, 66909557, 66906748, 67988445, 66907466, 66906183, 66908402, 66907579], "A": [66901496, 66903238, 66905004, 66902693, 66904062, 66902839, 66902110, 66903240, 66903755, 66903072, 66902272, 66903347, 66905647, 66902258, 66906539, 66904016, 67988407, 66934409, 66903855, 66903188, 66903009, 66902847], "F": [66936996, 66936445, 69949014, 71271095, 66930593, 67311416]}, "name": "E. Kirchhoff s Current Loss", "statement": "Your friend Kirchhoff is shocked with the current state of electronics\r\ndesign.\"Ohmygosh! Watt is wrong with the field? All these circuits are\r\ninefficient! There\u2019s so much capacity for improvement. The electrical\r\nengineers must not conduct their classes very well. It\u2019s absolutely\r\nrevolting\" he said.The negativity just keeps flowing out of him, but\r\neven after complaining so many times he still hasn\u2019t lepton the chance\r\nto directly change anything.\"These circuits have too much total\r\nresistance. Wire they designed this way? It\u2019s just causing a massive\r\nloss of resistors! Their entire field could conserve so much money if\r\nthey just maximized the potential of their designs. Why can\u2019t they just\r\ntry alternative ideas?\"The frequency of his protests about the\r\nelectrical engineering department hertz your soul, so you have decided\r\nto take charge and help them yourself. You plan to create a program that\r\nwill optimize the circuits while keeping the same circuit layout and\r\nmaintaining the same effective resistance.A has two endpoints, and is\r\nassociated with a certain constant, R, called its . The circuits we\u2019ll\r\nconsider will be formed from individual resistors joined together in or\r\nin , forming more complex circuits. The following image illustrates\r\ncombining circuits in series or parallel. According to your friend\r\nKirchhoff, the effective resistance can be calculated quite easily when\r\njoining circuits this way: When joining k circuits in with effective\r\nresistances R_1, R_2,\r\nldots, R_k, the effective resistance R of the resulting circuit is the\r\nsum R = R_1 + R_2 +\r\nldots + R_k. When joining k circuits in with effective resistances R_1,\r\nR_2,\r\nldots, R_k, the effective resistance R of the resulting circuit is found\r\nby solving for R in\r\nfrac{1}{R} =\r\nfrac{1}{R_1} +\r\nfrac{1}{R_2} +\r\nldots +\r\nfrac{1}{R_k}, ; if at least one R_i = 0, then the effective resistance\r\nof the whole circuit is simply R = 0. Circuits will be represented by\r\nstrings. Individual resistors are represented by an asterisk, \"\". For\r\nmore complex circuits, suppose s_1, s_2,\r\nldots, s_k represent k\r\nge 2 circuits. Then: \"\" represents their circuit; \"\" represents their\r\ncircuit. For example, \"\" represents the following circuit: Given a\r\ncircuit, your task is to assign the resistances of the individual\r\nresistors such that they satisfy the following requirements: Each\r\nindividual resistor has a resistance value; The effective resistance of\r\nthe whole circuit is r; The sum of the resistances of the individual\r\nresistors is minimized. If there are n individual resistors, then you\r\nneed to output the list r_1, r_2,\r\nldots, r_n (0\r\nle r_i, and r_i is an integer), where r_i is the resistance assigned to\r\nthe i-th individual resistor that appears in the input (from left to\r\nright). If it is impossible to accomplish the task, you must say so as\r\nwell.If it is possible, then it is guaranteed that the minimum sum of\r\nresistances is at most 10^{18}.\r\n", "solutions": ["#include <bits/stdc++.h>\nusing namespace std;\n\nusing ll = long long;\n\nstruct node {\n\tchar type;\n\tvector<node*> children;\n\tll dp = 0;\n\tll r = 0;\n};\n\nnode* get(string& s, int& idx){\n\tnode* v = new node();\n\tif(s[idx] == '*'){\n\t\tv->type = '*';\n\t\tidx++;\n\t\treturn v;\n\t} else if(s[idx] == '('){\n\t\tidx++;\n\t\twhile(true){\n\t\t\tv->children.push_back(get(s, idx));\n\t\t\tif(s[idx] == 'P' || s[idx] == 'S'){\n\t\t\t\tv->type = s[idx];\n\t\t\t\tidx++;\n\t\t\t} else if(s[idx] == ')'){\n\t\t\t\tidx++;\n\t\t\t\tbreak;\n\t\t\t} else assert(false);\n\t\t}\n\t} else assert(false);\n\treturn v;\n}\n\nconst ll Z = 2e18;\n\nll sq(ll r){\n\tif(r > Z / r) return Z;\n\treturn min(r * r, Z);\n}\n\nvoid make_dp(node* v){\n\tif(v->type == '*'){\n\t\tv->dp = 1;\n\t} else {\n\t\tfor(node* w : v->children){\n\t\t\tmake_dp(w);\n\t\t}\n\t\tif(v->type == 'S'){\n\t\t\tv->dp = Z;\n\t\t\tfor(node* w : v->children) v->dp = min(v->dp, w->dp);\n\t\t} else if(v->type == 'P'){\n\t\t\tv->dp = 0;\n\t\t\tfor(node* w : v->children) v->dp += w->dp;\n\t\t} else assert(false);\n\t}\n}\n\n\nll res = 0;\nvoid make_resistances(node* v, bool good){\n\tif(v->type == '*'){\n\t\tcout << \" \" << (good ? res : 0);\n\t} else if(v->type == 'P'){\n\t\tfor(node* w : v->children){\n\t\t\tmake_resistances(w, good);\n\t\t}\n\t} else if(v->type == 'S'){\n\t\tfor(node* w : v->children){\n\t\t\tif(w->dp == v->dp){\n\t\t\t\tmake_resistances(w, good);\n\t\t\t\tgood = false;\n\t\t\t} else {\n\t\t\t\tmake_resistances(w, false);\n\t\t\t}\n\t\t}\n\t} else assert(false);\n}\n\nvoid solve(){\n\tstring s;\n\tgetline(cin, s);\n\tauto g = s.find(' ');\n\tll R = stoll(s.substr(0, g));\n\n\ts = s.substr(g+1);\n\n\ts.resize(remove_if(s.begin(), s.end(), [&](char a){ return a == ' '; } ) - s.begin());\n\tint idx = 0;\n\tnode* z = get(s, idx);\n\tmake_dp(z);\n\tres = R * z->dp;\n\tcout << \"REVOLTING\";\n\tmake_resistances(z, true);\n\tcout << '\\n';\n}\n\nint main(){\n\tios_base::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\tint T;\n\tstring s;\n\tgetline(cin, s);\n\tT = stoi(s);\n\twhile(T--) solve();\n}"], "input": "", "output": "", "tags": ["math"], "dificulty": "2900", "interactive": false}