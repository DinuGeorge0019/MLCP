{
    "link": "https://codeforces.com//contest/685/problem/C",
    "problemId": "63494",
    "problem_idx": "C",
    "shortId": "685C",
    "contest_number": "685",
    "problem_submissions": {
        "D": [
            18684968,
            18683037,
            18681924,
            18684130,
            18684858,
            18675255,
            18679526,
            18679808,
            18682052,
            18681014,
            18682178,
            18675901,
            18679039,
            18766980,
            18685989,
            18678764,
            18679061
        ],
        "E": [
            18680021,
            18684845,
            18678334,
            18685890,
            18682877,
            18680554,
            18681882,
            18681692,
            18684390,
            18678520,
            18684936,
            18720222,
            18691735,
            18673504,
            18680472,
            18683676
        ],
        "C": [
            18677291,
            18679523,
            18681119,
            18679602,
            18685346,
            19679131,
            18684317,
            18682713,
            18688360
        ],
        "B": [
            18672960,
            18674692,
            18671800,
            18672771,
            18680872,
            18678053,
            18673109,
            18673699,
            18678361,
            18684612,
            18675812,
            18678146,
            19679139,
            19641621,
            18676260,
            18675658,
            18675674,
            18671554,
            18673419,
            18674754,
            18676154
        ],
        "A": [
            18671402,
            18670567,
            18669065,
            18670159,
            18670329,
            18681950,
            18668946,
            18671121,
            18669783,
            18686475,
            18678918,
            18676980,
            19641683,
            18673416,
            18767003,
            18671711,
            18682810,
            18674563,
            18668359,
            18672213
        ]
    },
    "name": "C. Optimal Point",
    "statement": "When the river brought Gerda to the house of the Old Lady who Knew\r\nMagic, this lady decided to make Gerda her daughter. She wants Gerda to\r\nforget about Kay, so she puts all the roses from the garden\r\nunderground.Mole, who lives in this garden, now can watch the roses\r\nwithout going up to the surface. Typical mole is blind, but this mole\r\nwas granted as special vision by the Old Lady. He can watch any\r\nunderground objects on any distance, even through the obstacles and\r\nother objects. However, the quality of the picture depends on the\r\nManhattan distance to object being observed.Mole wants to find an point\r\nto watch roses, that is such point with that the maximum Manhattan\r\ndistance to the rose is minimum possible.As usual, he asks you to help.\r\nbetween points and is defined as .\r\n",
    "solutions": [
        "#include<stdio.h>\n#include<cstring>\n#include<cstdlib>\n#include<cmath>\n#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<queue>\n#include<bitset>\n#include<utility>\n#include<functional>\n#include<iomanip>\n#include<sstream>\n#include<ctime>\n#include<cassert>\nusing namespace std;\n#define y0 y0z\n#define y1 y1z\n#define yn ynz\n#define j0 j0z\n#define j1 j1z\n#define jn jnz\n#define tm tmz\n#define buli(x) (__builtin_popcountll(x))\n#define bur0(x) (__builtin_ctzll(x))\n#define bul2(x) (63-__builtin_clzll(x))\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\n#define fil(a,b) memset((a),(b),sizeof(a))\n#define cl(a) fil(a,0)\n#define siz(x) ((int)(x).size())\n#define all(x) (x).begin(),(x).end()\n#define foreach(it,a) for(__typeof((a).begin()) it=(a).begin();it!=(a).end();it++)\n#define rep(i,a,b) for (int i=(a),_ed=(b);i<_ed;i++)\n#define per(i,a,b) for (int i=(b)-1,_ed=(a);i>=_ed;i--)\n#define pw(x) ((ll(1))<<(x))\n#define upmo(a,b) (((a)=((a)+(b))%mo)<0?(a)+=mo:(a))\n#define mmo(a,b) (((a)=1ll*(a)*(b)%mo)<0?(a)+=mo:(a))\nvoid getre(){int x=0;printf(\"%d\\n\",1/x);}\nvoid gettle(){int res=1;while(1)res<<=1;printf(\"%d\\n\",res);}\ntypedef pair<int,int> pii;\ntypedef vector<int> vi;\ntypedef vector<pii> vpii;\ntemplate<typename T,typename S>inline bool upmin(T&a,const S&b){return a>b?a=b,1:0;}\ntemplate<typename T,typename S>inline bool upmax(T&a,const S&b){return a<b?a=b,1:0;}\ntemplate<typename N,typename PN>inline N flo(N a,PN b){return a>=0?a/b:-((-a-1)/b)-1;}\ntemplate<typename N,typename PN>inline N cei(N a,PN b){return a>0?(a-1)/b+1:-(-a/b);}\ntemplate<typename N>N gcd(N a,N b){return b?gcd(b,a%b):a;}\ntemplate<typename N>inline int sgn(N a){return a>0?1:(a<0?-1:0);}\n#if ( ( _WIN32 || __WIN32__ ) && __cplusplus < 201103L)\n    #define lld \"%I64d\"\n#else\n    #define lld \"%lld\"\n#endif\ninline void gn(long long&x){\n\tint sg=1;char c;while(((c=getchar())<'0'||c>'9')&&c!='-');c=='-'?(sg=-1,x=0):(x=c-'0');\n\twhile((c=getchar())>='0'&&c<='9')x=x*10+c-'0';x*=sg;\n}\ninline void gn(int&x){long long t;gn(t);x=t;}\ninline void gn(unsigned long long&x){long long t;gn(t);x=t;}\ninline void gn(double&x){double t;scanf(\"%lf\",&t);x=t;}\ninline void gn(long double&x){double t;scanf(\"%lf\",&t);x=t;}\ninline void gs(char *s){scanf(\"%s\",s);}\ninline void gc(char &c){while((c=getchar())>126 || c<33);}\ninline void pc(char c){putchar(c);}\n#ifdef JCVB\n#define debug(...) fprintf(stderr, __VA_ARGS__)\n#else\n#define debug(...) \n#endif\ntypedef long long ll;\ntypedef double db;\ninline ll sqr(ll a){return a*a;}\ninline db sqrf(db a){return a*a;}\nconst int inf=0x3f3f3f3f;\nconst db pi=3.14159265358979323846264338327950288L;\nconst db eps=1e-6;\n//const int mo=0;\n//int qp(int a,ll b){int n=1;do{if(b&1)n=1ll*n*a%mo;a=1ll*a*a%mo;}while(b>>=1);return n;}\nint n;\nll x[111111],y[111111],z[111111];\n\nint out=0;\nbool check(ll d,int par){\n\tll lz,rz;\n\tlz=-7e18,rz=7e18;\n\n\tll l10,r10,l20,r20;\n\tll l1,r1,l2,r2;\n\n\tl1=l2=-7e18;\n\tr1=r2=7e18;\n\trep(i,1,n+1){\n\t\tupmax(l1,x[i]+y[i]+z[i]-d);\n\t\tupmin(r1,x[i]+y[i]+z[i]+d);\n\t\tupmax(l2,x[i]+y[i]-z[i]-d);\n\t\tupmin(r2,x[i]+y[i]-z[i]+d);\n\t}\n\tif((l1&1)!=par)l1++;\n\tif((l2&1)!=par)l2++;\n\tif((r1&1)!=par)r1--;\n\tif((r2&1)!=par)r2--;\n\t\n\tif(l1>r1 || l2>r2)return 0;\n\n\tupmin(rz,(r1-l2)/2ll);\n\tupmax(lz,(l1-r2)/2ll);\n\n\tl10=l1;\n\tr10=r1;\n\tl20=l2;\n\tr20=r2;\n\n\tl1=l2=-7e18;\n\tr1=r2=7e18;\n\trep(i,1,n+1){\n\t\tupmax(l1,x[i]-y[i]+z[i]-d);\n\t\tupmin(r1,x[i]-y[i]+z[i]+d);\n\t\tupmax(l2,x[i]-y[i]-z[i]-d);\n\t\tupmin(r2,x[i]-y[i]-z[i]+d);\n\t}\n\tif((l1&1)!=par)l1++;\n\tif((l2&1)!=par)l2++;\n\tif((r1&1)!=par)r1--;\n\tif((r2&1)!=par)r2--;\n\t\n\tif(l1>r1 || l2>r2)return 0;\n\n\tupmin(rz,(r1-l2)/2ll);\n\tupmax(lz,(l1-r2)/2ll);\n\n\tif(lz>rz)return 0;\n\n\tll z=lz;\n\n\tll lplu=max(l10-z,l20+z);\n\tll rplu=min(r10-z,r20+z);\n\tll lmin=max(l1-z,l2+z);\n\tll rmin=min(r1-z,r2+z);\n\n\tll x=(lplu+lmin)/2,y=(lplu-lmin)/2;\n\n\tif(out){\n\t\tout=0;\n\t\tprintf(\"%I64d %I64d %I64d\\n\",x,y,z);\n\t}\n\treturn 1;\n}\nint main()\n{\n#ifdef JCVB\n\t//freopen(\"1.in\",\"r\",stdin);\n\t//freopen(\"1.out\",\"w\",stdout);\n\tint _time_jc=clock();\n#endif\n\tint te;gn(te);\n\twhile(te--){\n\t\tgn(n);\n\t\trep(i,1,n+1){\n\t\t\tgn(x[i]);\n\t\t\tgn(y[i]);\n\t\t\tgn(z[i]);\n\t\t}\n\t\tll l=0,r=3.1e18;\n\t\twhile(l<=r){\n\t\t\tll mid=l+r>>1;\n\t\t\tif(check(mid,0) || check(mid,1))r=mid-1;\n\t\t\telse l=mid+1;\n\t\t}\n\t\tout=1;\n\t\tcheck(l,0);\n\t\tcheck(l,1);\n\t}\n\t\n#ifdef JCVB\n\tdebug(\"time: %d\\n\",int(clock()-_time_jc));\n#endif\n\treturn 0;\n}\n\n"
    ],
    "input": "",
    "output": "",
    "tags": [
        "binary search",
        "math"
    ],
    "dificulty": "2900",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV1\\C. Optimal Point.json",
    "editorial_link": "https://codeforces.com//blog/entry/45558",
    "editorial": "Let's say few words about ternary search. It works correctly, but too slow.\nIt's complexity is , where n?=?105, and v?=?1018.\nDon't use it.\n\nSolution.\n1) Let's make binary search on answer\n2) Consider areas of \"good\" points (with dist ???mid) for each source point.\n3) Intersect those areas and check for solution.\n\nThis area can be decsribed by following inequalities:\n(You can achieve them if you expand modules in inequality \"manhattan distance <= const\")\n\n..???x?+?y?+?z???..\n\n\n..????-?x?+?y?+?z???..\n\n\n..???x?-?y?+?z???..\n\n\n..???x?+?y?-?z???..\n\n\n.. denote some constants.\n\nIf you intersect set of such system, you will get system of the same form, so let's learn how to solve such system.\n\nLet's replace some variables:\n\na?=??-?x?+?y?+?z\n\n\nb?=?x?-?y?+?z\n\n\nc?=?x?+?y?-?z\n\n\nThen:\n\nx?+?y?+?z?=?a?+?b?+?c\n\n\nx?=?(b?+?c)?/?2\n\n\ny?=?(a?+?c)?/?2\n\n\nz?=?(a?+?b)?/?2\n\n\nNow the system transforms into:\n\n..???a???..\n\n\n..???b???..\n\n\n..???c???..\n\n\n..???a?+?b?+?c???..\n\n\nWe need to check if the system has solution in integers, also the numbers a, b, c must be of the same parity (have equal remainder after division by 2). (This is required for x, y, z to be integers too)\n\nLet's get rid of parity constraint. Bruteforce the parity of a, b, c (two cases)\n\nMake following replacement: a?=?2a'?+?r, b?=?2b'?+?r, c?=?2c'?+?r, where r?=?0 or r?=?1. Substitute in equations above, simplify, and gain the same system for a', b', c' without parity constraint.\n\nAnd now the system can be solved greedy (At first set a, b, c with minimum, and then raise slowly if necessary)."
}