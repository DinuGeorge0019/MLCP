{"link": "https://codeforces.com//contest/1322/problem/D", "problemId": "555656", "problem_idx": "D", "shortId": "1322D", "contest_number": "1322", "problem_submissions": {"E": [72651847, 72667619, 72663863, 81989702, 73455963, 72654927, 72662345, 72661386, 72662000, 72646344], "D": [72644625, 72640728, 72645597, 72646886, 72650508, 72648101, 72647799, 73117806, 72646593, 73115826, 72647714, 72648983, 72649173, 72652083, 72650733, 72645310, 72649530, 72653676, 72654635, 72652516], "C": [72636777, 72636963, 72637518, 72639394, 72637388, 72638096, 72639734, 73117801, 72640343, 72640613, 72638032, 72638943, 72642117, 72644813, 72641527, 72650551, 72650396, 72639973, 72642914, 72642962, 72643894], "B": [72630406, 72634706, 72633179, 72634815, 72634956, 72641590, 72633350, 73117683, 72635692, 72635442, 72633727, 72635100, 72639222, 72636092, 72637879, 72655301, 72636262, 72636039, 72637209, 72638209, 72636501], "A": [72628149, 72629253, 72629705, 72631540, 72628375, 72630668, 72629135, 73117511, 72629708, 72630674, 72628794, 72628291, 72630330, 72629133, 72629728, 72647587, 72628383, 72631203, 72630004, 72630007, 72628407], "F": [74191172, 73465587, 77378072, 77728968]}, "name": "D. Reality Show", "statement": "A popular reality show is recruiting a new cast for the third season! n\r\ncandidates numbered from 1 to n have been interviewed. The candidate i\r\nhas aggressiveness level l_i, and recruiting this candidate will cost\r\nthe show s_i roubles.The show host reviewes applications of all\r\ncandidates from i=1 to i=n by increasing of their indices, and for each\r\nof them she decides whether to recruit this candidate or not. If\r\naggressiveness level of the candidate i is strictly higher than that of\r\nany candidates, then the candidate i will definitely be rejected.\r\nOtherwise the host may accept or reject this candidate at her own\r\ndiscretion. The host wants to choose the cast so that to maximize the\r\ntotal .The show makes revenue as follows. For each aggressiveness level\r\nv a corresponding profitability value c_v is specified, which can be\r\npositive as well as negative. All recruited participants enter the stage\r\none by one by increasing of their indices. When the participant i enters\r\nthe stage, events proceed as follows: The show makes c_{l_i} roubles,\r\nwhere l_i is initial aggressiveness level of the participant i. If there\r\nare two participants with the same aggressiveness level on stage, they\r\nimmediately start a fight. The outcome of this is: the defeated\r\nparticipant is hospitalized and leaves the show. aggressiveness level of\r\nthe victorious participant is increased by one, and the show makes c_t\r\nroubles, where t is the new aggressiveness level. The fights continue\r\nuntil all participants on stage have distinct aggressiveness levels. It\r\nis allowed to select an empty set of participants (to choose neither of\r\nthe candidates).The host wants to recruit the cast so that the total\r\nprofit is maximized. The profit is calculated as the total revenue from\r\nthe events on stage, less the total expenses to recruit all accepted\r\nparticipants (that is, their total s_i). Help the host to make the show\r\nas profitable as possible.\r\n", "solutions": ["#include<bits/stdc++.h>\n#define ll long long\n#define ull unsigned ll\n#define uint unsigned\n#define pii pair<int,int>\n#define pll pair<ll,ll>\n#define IT iterator\n#define PB push_back\n#define fi first\n#define se second\n#define For(i,j,k) for (int i=(int)(j);i<=(int)(k);i++)\n#define Rep(i,j,k) for (int i=(int)(j);i>=(int)(k);i--)\n#define CLR(a,v) memset(a,v,sizeof(a));\n#define CPY(a,b) memcpy(a,b,sizeof(a));\n#define debug puts(\"wzpakking\")\n#define y1 ysghysgsygsh\nusing namespace std;\nconst int N=5005;\nint n,m,l[N],s[N],c[N];\nint mx[N],top[N],ans;\nint q[N][N],qq[N],f[N][N];\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tFor(i,1,n) scanf(\"%d\",&l[i]);\n\tFor(i,1,n) scanf(\"%d\",&s[i]);\n\tFor(i,1,n+m) scanf(\"%d\",&c[i]);\n\tFor(i,1,n) s[i]=c[l[i]]-s[i];\n\tint ans=0;//-(1<<30);\n\tmemset(f,233,sizeof(f));\n\tFor(i,1,n+m) f[i][0]=0;\n\tRep(i,n,1){\n\t\tint L=l[i];\n\t\tRep(j,mx[L],0){\n\t\t\tint val=f[L][j]+s[i],t=j+1;\n\t\t\t//cout<<L<<' '<<j<<' '<<t<<' '<<val<<endl;\n\t\t\tfor (int p=L;t;){\n\t\t\t\tmx[p]=max(mx[p],t);\n\t\t\t\tf[p][t]=max(f[p][t],val);\n\t\t\t\tp++; t/=2; val+=c[p]*t;\n\t\t\t}\n\t\t\tans=max(ans,val);\n\t\t}\n\t\tFor(j,1,n+m) f[j][0]=max(f[j][0],max(f[j-1][0],f[j-1][1]));\n\t\t/*q[L][++top[L]]=s[i]; ++mx[L];\n\t\tsort(q[L]+1,q[L]+top[L]+1,greater<int>());\n\t\tRep(j,mx[L]-1,0) f[L][j+1]=max(f[L][j+1],f[L][j]+s[i]);\n\t\tFor(j,L+1,n+m){\n\t\t\tint p1=0,p2=0,l1=mx[j-1]/2,l2=top[j];\n\t\t\tFor(k,0,l1) qq[k]=0;\n\t\t\tFor(k,0,mx[L-1]) qq[k/2]=max(qq[k/2],f[j-1][k]);\n\t\t\tFor(k,0,l1) qq[k]+=1ll*c[j]*k;\n\t\t\tint S=qq[0];\n\t\t\tfor (;p1<=l1||p2<=l2;){\n\t\t\t\tf[j][p1+p2]=S;\n\t\t\t\tif (p1==l1&&p2==l2) break;\n\t\t\t\tif (p2==l2||(p1<l1&&qq[p1+1]-qq[p1]>q[j][p2+1]))\n\t\t\t\t\tS+=qq[p1+1]-qq[p1],++p1;\n\t\t\t\telse S+=q[j][++p2];\n\t\t\t}\n\t\t\tmx[j]=l1+l2;\n\t\t\t//cout<<\"len \"<<i<<' '<<j<<' '<<mx[j]<<' '<<f[j][0]<<' '<<f[j][1]<<endl;\n\t\t}*/\n\t}\n\tprintf(\"%d\\n\",ans);\n} "], "input": "", "output": "", "tags": ["bitmasks", "dp"], "dificulty": "2800", "interactive": false}