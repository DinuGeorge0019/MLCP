{"link": "https://codeforces.com//contest/249/problem/C", "problemId": "2272", "problem_idx": "C", "shortId": "249C", "contest_number": "249", "problem_submissions": {"B": [2649094, 2645222, 2648325, 2645133, 2741637, 2647160, 2646906, 2647140, 2647297, 2647803, 2649557, 2647782, 2649225, 2647984], "C": [2648016, 2646272, 2649752, 2649594, 2648682, 2650241, 2650113], "D": [2646289, 2646128, 2648091, 2747311, 2647914, 2649873, 2686963, 3563620], "A": [2645128, 2644427, 2643471, 2646603, 2643981, 2650080, 2644186, 2645243, 2644193, 2644672, 2644232, 2644059, 2650955, 2650931, 2645477, 2644588, 2644531], "E": [2649181, 2648187, 2749553, 2893989]}, "name": "C. Piglet s Birthday", "statement": "Piglet has got a birthday today. His friend Winnie the Pooh wants to\r\nmake the best present for him a honey pot. Of course Winnie realizes\r\nthat he won\u2019t manage to get the full pot to Piglet. In fact, he is\r\nlikely to eat all the honey from the pot. And as soon as Winnie planned\r\na snack on is way, the pot should initially have as much honey as\r\npossible. The day before Winnie the Pooh replenished his honey stocks.\r\nWinnie-the-Pooh has shelves at home, each shelf contains some, perhaps\r\nzero number of honey pots. During the day Winnie came to the honey\r\nshelves times; on the -th time he came to some shelf , took from it some\r\npots , tasted the honey from each pot and put all those pots on some\r\nshelf . As Winnie chose the pots, he followed his intuition. And that\r\nmeans that among all sets of pots on shelf , he equiprobably chooses\r\none.Now Winnie remembers all actions he performed with the honey pots.\r\nHe wants to take to the party the pot he didn\u2019t try the day before. For\r\nthat he must know the mathematical expectation of the number of shelves\r\nthat don\u2019t have a single . To evaluate his chances better,\r\nWinnie-the-Pooh wants to know the value after each action he\r\nperforms.Your task is to write a program that will find those values for\r\nhim.\r\n", "solutions": ["#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#include <cassert>\n#include <ctime>\n#include <algorithm>\n#include <numeric>\n#include <string>\n#include <vector>\n#include <deque>\n#include <queue>\n#include <list>\n#include <map>\n#include <set>\n\nusing namespace std;\n\n#define eprintf(...) fprintf(stderr, __VA_ARGS__)\n#define pb push_back\n#define mp make_pair\n#define sz(x) ((int)(x).size())\n\ntypedef long long ll;\ntypedef vector<ll> vll;\ntypedef vector<int> vi;\ntypedef vector<vi> vvi;\ntypedef vector<bool> vb;\ntypedef vector<vb> vvb;\ntypedef pair<int, int> pii;\n\nconst int MAXN = 1e5 + 1e2;\nconst int MAXS = 1.1e2;\n\nvoid take(double *prob, int startcnt, int &ccnt, double &ans) {\n  assert(ccnt > 0);\n\n  ans -= prob[0];\n  for (int i = 0; i <= startcnt; i++) {\n    double nprob = prob[i] * double(ccnt - i) / ccnt;\n    if (i < startcnt)\n      nprob += prob[i + 1] * double(i + 1) / ccnt;\n    prob[i] = nprob;\n  }\n  ccnt--;\n  ans += prob[0];\n}\ndouble prob[MAXN][MAXS + 1];\n\nint main() {\n  #ifdef DEBUG\n  freopen(\"std.in\", \"r\", stdin);\n  freopen(\"std.out\", \"w\", stdout);\n  #endif\n\n  int n;\n  while (scanf(\"%d\", &n) >= 1) {\n    vi scnt(n);\n    for (int i = 0; i < n; i++)\n      scanf(\"%d\", &scnt[i]);\n\n    memset(prob, 0, sizeof prob);\n    double ans = 0;\n    for (int i = 0; i < n; i++) {\n       prob[i][scnt[i]] = 1;\n       if (scnt[i] == 0) ans++;\n    }\n\n    vi ccnt = scnt;\n    int q;\n    scanf(\"%d\", &q);\n    while (q --> 0) {\n      int a, b, cnt;\n      scanf(\"%d%d%d\", &a, &b, &cnt), a--, b--;\n      for (int i = 0; i < cnt; i++)\n        take(prob[a], scnt[a], ccnt[a], ans);\n      ccnt[b] += cnt;\n      printf(\"%.18e\\n\", ans);\n    }\n  }\n  return 0;\n}\n"], "input": "", "output": "", "tags": ["dp", "probabilities"], "dificulty": "2600", "interactive": false}