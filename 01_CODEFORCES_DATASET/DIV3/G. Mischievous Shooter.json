{"link": "https://codeforces.com//contest/1921/problem/G", "problemId": "2427797", "problem_idx": "G", "shortId": "1921G", "contest_number": "1921", "problem_submissions": {"G": [241831050, 241827837, 241810477, 242123235, 241856864, 241856757, 241846360, 241844808, 241871322], "F": [241783186, 241781250, 241816532, 241785583, 241791384, 241804903, 241794317, 241794393, 241798773, 241768039, 241794044, 241853387, 241797954, 241801360, 241966488, 241966437, 241795377, 241807485, 241804479, 241771769, 241809604], "E": [241757922, 241820604, 241803155, 241764773, 241760055, 241766238, 241761128, 241758418, 241762380, 241791042, 241765829, 241852718, 241852234, 241772377, 241777235, 241766546, 241773883, 241777362, 241799105, 241776065], "C": [241743872, 241738511, 241782285, 241713771, 241731802, 241722543, 241723479, 241721384, 241731073, 241731927, 241733665, 241724987, 241731027, 241724748, 241725203, 241727491, 241738163, 241730878], "D": [241740026, 241755677, 241822282, 241733413, 241740126, 241836675, 241730048, 241743437, 241739467, 241740332, 241741717, 241747196, 241850173, 241850099, 241755029, 241745422, 241752838, 241742872, 241743137, 241722134, 241753020], "B": [241716338, 241724504, 241779126, 241723511, 241712900, 241714033, 241714226, 241710825, 241717515, 241711138, 241719732, 241714246, 241713725, 241711911, 241715371, 241717975, 241730046, 241720842], "A": [241704520, 241709611, 241777552, 241704978, 241704766, 241705020, 241706153, 241705013, 241708070, 241704538, 241706951, 241707445, 241704678, 241705172, 241707810, 241705881, 241707544, 241704527]}, "name": "G. Mischievous Shooter", "statement": "Once the mischievous and wayward shooter named Shel found himself on a\r\nrectangular field of size n\r\ntimes m, divided into unit squares. Each cell either contains a target\r\nor not.Shel only had a lucky shotgun with him, with which he can shoot\r\nin one of the four directions: right-down, left-down, left-up, or\r\nright-up. When fired, the shotgun hits all targets in the chosen\r\ndirection, the Manhattan distance to which does not exceed a fixed\r\nconstant k. The Manhattan distance between two points (x_1, y_1) and\r\n(x_2, y_2) is equal to |x_1 - x_2| + |y_1 - y_2|. Shel\u2019s goal is to hit\r\nas many targets as possible. Please help him find this value.\r\n", "solutions": ["#include<bits/stdc++.h>\n#define pb push_back\n#define pf push_front\n#define F first\n#define S second\n#define ff first\n#define ss second\n#define ll long long\n#define ull unsigned long long\n#define ld long double\n#define pll pair<ll,ll>\n#define plll pair<pll,ll>\n#define pllll pair<pll,pll>\n#define vl vector<ll>\n#define vll vector<pll>\n#define vlll vector<plll>\n#define vllll vector<pllll>\n#define vb vector<bool>\n#define sz size()\n#define fr front()\n#define all(x) (x).begin(), (x).end()\n#define rall(x) (x).rbegin(), (x).rend()\n#define bk back();\nusing namespace std;\nconst ld pi=3.14159265359;\nconst ll e5=1e5;\nconst ll e6=1e6;\nconst ll e9=1e9;\nconst ll inf=1e18;\nconst ll mod=1e9+7;\nconst ll mod2=998244353;\nconst ll N=1e5+5;\nll bpm(ll x,ll y,ll m){if(y==0)return 1%m;if(y==1)return x%m;ll p=bpm(x,y/2,m);\nif(y%2==0)return p*p%m;else return p*p%m*x%m;}\nll bp(ll x,ll y){if(y==0)return 1;if(y==1)return x;ll p=bp(x,y/2);\nif(y%2==0)return p*p;else return p*p*x;}\nvoid solve(/**/){\n    ll n,m,k,ans=0;\n    cin>>n>>m>>k;\n    char c[n+1][m+1];\n    ll s[n+1][m+1];\n    for(ll i=0;i<=n;i++) s[i][0]=0;\n    for(ll i=1;i<=m;i++) s[0][i]=0;\n    for(ll i=1;i<=n;i++){\n        for(ll j=1;j<=m;j++){\n            cin>>c[i][j];\n            s[i][j]=s[i-1][j]+s[i][j-1]-s[i-1][j-1];\n            if(c[i][j]=='#') s[i][j]++;\n        }\n    }\n    for(ll i=1;i<=n;i++){\n        for(ll j=1;j<=m;j++){\n            ll x=0;\n            if(n-i<=m-j){\n                for(ll kk=0;kk<=k&&i+kk<=n;kk++){\n                    ll i1=i+kk-1, j1=j-1, i2=i+kk, j2=min(j+k-kk,m);\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }else{\n                for(ll kk=0;kk<=k&&j+kk<=m;kk++){\n                    ll j1=j+kk-1, i1=i-1, j2=j+kk, i2=min(i+k-kk,n);\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }\n            ans=max(ans,x);\n            x=0;\n            if(n-i+1<=j){\n                for(ll kk=0;kk<=k&&i+kk<=n;kk++){\n                    ll i1=i+kk-1, j1=max(j-k+kk-1,0ll), i2=i+kk, j2=j;\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }else{\n                for(ll kk=0;kk<=k&&j-kk>=1;kk++){\n                    ll j1=j-kk-1, i1=i-1, j2=j-kk, i2=min(i+k-kk,n);\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }\n            ans=max(ans,x);\n            x=0;\n            if(i<=m-j+1){\n                for(ll kk=0;kk<=k&&i-kk>=1;kk++){\n                    ll i1=i-kk-1, j1=j-1, i2=i-kk, j2=min(j+k-kk,m);\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }else{\n                for(ll kk=0;kk<=k&&j+kk<=m;kk++){\n                    ll j1=j+kk-1, i1=max(i-k+kk-1,0ll), j2=j+kk, i2=i;\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }\n            ans=max(ans,x);\n            x=0;\n            if(i<=j){\n                for(ll kk=0;kk<=k&&i-kk>=1;kk++){\n                    ll i1=i-kk-1, j1=max(j-k+kk-1,0ll), i2=i-kk, j2=j;\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }else{\n                for(ll kk=0;kk<=k&&j-kk>=1;kk++){\n                    ll j1=j-kk-1, i1=max(i-k+kk-1,0ll), j2=j-kk, i2=i;\n                    x+=s[i2][j2]-s[i1][j2]-s[i2][j1]+s[i1][j1];\n                }\n            }\n            ans=max(ans,x);\n        }\n    }\n    cout<<ans;\n    return;\n}\nint main(/*Aldk*/){\n    ios_base::sync_with_stdio(false);cin.tie(NULL);\n    //freopen(\".in\", \"r\", stdin);\n    //freopen(\".out\", \"w\", stdout);    \n    //cout<<setprecision(6)<<fixed;\n    ll T=1;\n    cin>>T;\n    for(ll i=1;i<=T;i++){\n        //cout<<\"Case #\"<<i<<\": \";\n        solve();\n        cout<<'\\n';\n    }\n    return 0;\n}"], "input": "", "output": "", "tags": ["brute force", "data structures", "divide and conquer", "dp", "implementation"], "dificulty": "2200", "interactive": false}