{"link": "https://codeforces.com//contest/1782/problem/H1", "problemId": "1738314", "problem_idx": "H1", "shortId": "1782H1", "contest_number": "1782", "problem_submissions": {"G": [189352903, 189354160, 189342529, 189347964, 189346429, 189415258, 189347317, 189738607, 189347232, 189347696, 189403021, 189438204, 189354810, 189338967, 189344949], "H1": [189341567, 189339761, 189349634, 189355935, 189355012, 189341367, 189348685, 189366896, 189384259, 189345985, 189353203, 189354256, 189356712], "F": [189325657, 189363621, 189331442, 189327188, 189334558, 189331825, 189332228, 189332897, 189335481, 189328585, 189328764, 189334100, 189338796, 189342861, 189333278, 189345646, 189348301, 189336716, 189329952, 189336813], "E": [189322203, 189324476, 189336013, 189324984, 189327367, 189324941, 189325259, 189324742, 189325043, 189324750, 189330839, 189330033, 189340117, 189340110, 189356727, 189364874, 189338107, 189329882], "D": [189315553, 189316553, 189320757, 189315522, 189321240, 189315774, 189315356, 189317449, 189316444, 189318717, 189318855, 189319485, 189321217, 189322258, 189322561, 189316855, 189317394, 189318806, 189319611], "C": [189312571, 189313515, 189317007, 189313044, 189315685, 189312570, 189312443, 189313938, 189314521, 189313780, 189316398, 189315035, 189318312, 189317410, 189321818, 189314789, 189315093, 189314367], "B": [189309405, 189309603, 189311019, 189308821, 189310918, 189309246, 189308942, 189310194, 189308126, 189309056, 189311263, 189310085, 189312839, 189309172, 189329674, 189309853, 189310568, 189309470], "A": [189307515, 189306919, 189307198, 189307124, 189307391, 189307301, 189307111, 189307534, 189306943, 189307353, 189307056, 189307424, 189308244, 189319051, 189308061, 189307499, 189307060, 189307053], "H2": [189361277, 189352155, 189886586, 189749780, 189366917, 189362146]}, "name": "H1. Window Signals  easy version ", "statement": "A house at the sea has h floors, all of the same height. The side of the\r\nhouse facing the sea has w windows at equal distances from each other on\r\nevery floor. Thus, the windows are positioned in cells of a rectangular\r\ngrid of size h\r\ntimes w.In every window, the light can be turned either on or off,\r\nexcept for the given k (at most 2) windows. In these k windows the light\r\ncan not be turned on, because it is broken.In the dark, we can send a\r\nsignal to a ship at sea using a configuration of lights turned on and\r\noff. However, the ship can not see the position of the lights with\r\nrespect to the house. Thus, if one configuration of windows with lights\r\non can be transformed into another using parallel translation, these\r\nconfigurations are considered equal. Note that only parallel translation\r\nis allowed, but neither rotations nor flips are. Moreover, a\r\nconfiguration without any light at all is not considered valid.Find how\r\nmany different signals the ship can receive and print this number modulo\r\n998\r\n,244\r\n,353.\r\n", "solutions": ["#include<bits/stdc++.h>\n#define L(i, j, k) for(int i = (j); i <= (k); ++i)\n#define R(i, j, k) for(int i = (j); i >= (k); --i)\n#define ll long long\n#define sz(a) ((int) (a).size())\n#define vi vector < int > \n#define me(a, x) memset(a, x, sizeof(a))\n#define ull unsigned long long\n#define ld __float128\nusing namespace std;\nconst int N = 1607, mod = 998244353;\nint n, m, xn, xm, k, r[N], c[N], pw[N];\nbool vis[N][N];\nint msk[N];\nint ok[N];\nvi e[N];\ninline int getid(pair < int, int > o) {\n\treturn (o.first - 1) * xm + o.second;\n}\nvi T;\nbool use[N];\nvoid getlen(int u) {\n\tif(use[u]) return ;\n\tuse[u] = true;\n\tT.emplace_back(u);\n\tfor(auto v : e[u]) \n\t\tgetlen(v);\n}\nint dp[1 << 4];\nint ndp[1 << 4];\nvoid clear() {\n\tme(dp, 0);\n\tdp[0] = 1;\n}\nvoid push(vi msk, vi cnt) {\n\t\n\tme(ndp, 0);\n\tL(t, 0, sz(msk) - 1) {\n\t\tint v = msk[t];\n\t\tint c = cnt[t];\n\t\tL(i, 0, 15)\n\t\t\t(ndp[i | v] += (ll) c * dp[i] % mod) %= mod; \n\t}\n\tswap(dp, ndp);\n}\nint F[2][16], G[2][16];\nvoid Main() {\n\tcin >> n >> m >> k;\n\tpw[0] = 1;\n\tL(i, 1, n * m) pw[i] = (ll) pw[i - 1] * 2 % mod; \n\tL(i, 1, k) {\n\t\tcin >> r[i] >> c[i]; \n\t}\n\t\n\tint ns = 0;\n\tfor(xn = 1; xn <= n; ++xn) {\n\t\tfor(xm = 1; xm <= m; ++xm) {\n\t\t\tme(use, 0);\n\t\t\tL(i, 1, xn) \n\t\t\t\tL(j, 1, xm) \n\t\t\t\t\tvis[i][j] = true;\n\t\t\tL(i, 1, xn) {\n\t\t\t\tL(j, 1, xm) {\n\t\t\t\t\tint Msk = 0;\n\t\t\t\t\tif(i == 1) {\n\t\t\t\t\t\tMsk += 1;\n\t\t\t\t\t} \n\t\t\t\t\tif(i == xn) {\n\t\t\t\t\t\tMsk += 2;\n\t\t\t\t\t}\n\t\t\t\t\tif(j == 1) {\n\t\t\t\t\t\tMsk += 4;\n\t\t\t\t\t}\n\t\t\t\t\tif(j == xm) {\n\t\t\t\t\t\tMsk += 8;\n\t\t\t\t\t}\n\t\t\t\t\tmsk[(i - 1) * xm + j] = Msk;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tclear();\n\t\t\tL(i, 1, xn * xm) \n\t\t\t\tpush(vi{0, msk[i]}, vi{1, 1});\n\t\t\t(ns += dp[15]) %= mod;\n\t\t\t\n\t\t\tL(i, 1, xn * xm) \n\t\t\t\tok[i] = true, e[i].clear();\n\t\t\tbool okay = false;\n\t\t\tL(lx, 1, n - xn + 1) if(!okay) {\n\t\t\t\tL(ly, 1, m - xm + 1) if(!okay) {\n\t\t\t\t\tint rx = lx + xn - 1;\n\t\t\t\t\tint ry = ly + xm - 1;\n\t\t\t\t\tvector < pair < int, int > > vc; \n\t\t\t\t\tL(i, 1, k) {\n\t\t\t\t\t\tif(lx <= r[i] && r[i] <= rx) {\n\t\t\t\t\t\t\tif(ly <= c[i] && c[i] <= ry) {\n\t\t\t\t\t\t\t\tvc.emplace_back(r[i] - lx + 1, c[i] - ly + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!sz(vc)) {\n\t\t\t\t\t\tokay = true;\n\t\t\t\t\t} else if(sz(vc) == 1) {\n\t\t\t\t\t\tok[getid(vc[0])] = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tint u = getid(vc[0]);\n\t\t\t\t\t\tint v = getid(vc[1]);\n\t\t\t\t\t\te[u].emplace_back(v);\n\t\t\t\t\t\te[v].emplace_back(u);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(okay) continue;\n\t\t\t\n\t\t\tL(i, 1, xn * xm) \n\t\t\t\tif(sz(e[i]) > 2) {\n\t\t\t\t\tfor(auto v : e[i]) cout << v << ' ';\n\t\t\t\t\tcout << endl;\n\t\t\t\t}\n\t\t\t\n\t\t\tclear();\n\t\t\tL(i, 1, xn * xm) \n\t\t\t\tif(!use[i]) {\n//\t\t\t\t\tif(sz(e[i]) == 1) {\n//\t\t\t\t\t\tpush(vi{0, msk[i]}, vi{ok[i], 1});\n//\t\t\t\t\t\tcontinue; \n//\t\t\t\t\t}\n\t\t\t\t\tT.clear();\n\t\t\t\t\tgetlen(i);\n\t\t\t\t\t\t\n\t\t\t\t\tme(F, 0);\n\t\t\t\t\tF[1][0] = 1;\n\t\t\t\t\tfor(auto u : T) {\n\t\t\t\t\t\tme(G, 0);\n\t\t\t\t\t\tL(x, 0, 1) {\n\t\t\t\t\t\t\tL(y, 0, 1) if(x || y) {\n\t\t\t\t\t\t\t\tif(!ok[u] && !y) continue;\n\t\t\t\t\t\t\t\tint t = msk[u];\n\t\t\t\t\t\t\t\tif(!y) t = 0;\n\t\t\t\t\t\t\t\tL(i, 0, 15) (G[y][i | t] += F[x][i]) %= mod;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswap(F, G);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvi A, B;\n\t\t\t\t\tL(i, 0, 15) {\n\t\t\t\t\t\tint s = (F[0][i] + F[1][i]) % mod; \n\t\t\t\t\t\tif(s) A.emplace_back(i), B.emplace_back(s);\n\t\t\t\t\t}\n\t\t\t\t\tpush(A, B);\n//\t\t\t\t\tcout << ok[i] << ' ' << msk[i] << '\\n';\n//\t\t\t\t\tL(i, 0, sz(A) - 1) cout << A[i] << \" : \" << B[i] << '\\n';\n//\t\t\t\t\tcout << '\\n';\n\t\t\t\t}\n\t\t\t(ns += mod - dp[15]) %= mod;\n\t\t}\n\t}\n\tcout << ns << '\\n';\n} \nint main() {\n\tios :: sync_with_stdio(false);\n\tcin.tie(0); cout.tie(0);\n\tint t;\n\tcin >> t;\n\twhile(t--) Main();\n\treturn 0;\n} \n/*\n1\n40 40 2\n10 11\n20 23\n\n1\n40 40 2\n10 11\n11 12\n*/"], "input": "", "output": "", "tags": ["brute force", "combinatorics", "math"], "dificulty": "3200", "interactive": false}