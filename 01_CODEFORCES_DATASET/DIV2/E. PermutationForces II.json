{"link": "https://codeforces.com//contest/1698/problem/E", "problemId": "1443730", "problem_idx": "E", "shortId": "1698E", "contest_number": "1698", "problem_submissions": {"F": [162124470, 162134445, 162141749, 162152934, 177654064, 216084662, 162196377, 162139942, 162355602, 162159626, 162690820], "E": [162087630, 162097353, 162109816, 162103301, 162126529, 162103867, 162097541, 162101116, 162109117, 162107378, 162110311, 162151314, 162112938, 162118264, 162120819, 162122603, 162129047, 162116428, 162113567, 162115753], "D": [162072106, 162078971, 162084618, 162091663, 162091608, 162080384, 162079742, 162083927, 162089597, 162090503, 162089228, 162119224, 162090409, 162087036, 162090706, 162084921, 162084389, 162101274, 162089309, 162089923], "C": [162065641, 162067112, 162066151, 162070233, 162081538, 162071658, 162069982, 162072714, 162074007, 162068223, 162076542, 162110420, 162075987, 162073114, 162072860, 162074806, 162073708, 162075609, 162078161, 162072891], "B": [162059543, 162058156, 162059458, 162060292, 162065675, 162061709, 162057759, 162058869, 162063379, 162060397, 162060756, 162115063, 162060812, 162061896, 162062035, 162068563, 162064118, 162063059, 162062265, 162061711], "A": [162055540, 162055455, 162055545, 162055770, 162057397, 162055986, 162055221, 162055288, 162058360, 162055918, 162055534, 162055768, 162055783, 162057223, 162056112, 162055836, 162057629, 162055832, 162056104, 162055773], "G": [162150291, 162713012]}, "name": "E. PermutationForces II", "statement": "You are given a permutation a of length n. Recall that permutation is an\r\narray consisting of n distinct integers from 1 to n in arbitrary\r\norder.You have a strength of s and perform n moves on the permutation a.\r\nThe i-th move consists of the following: Pick two integers x and y such\r\nthat i\r\nleq x\r\nleq y\r\nleq\r\nmin(i+s,n), and swap the positions of the integers x and y in the\r\npermutation a. Note that you select x=y in the operation, in which case\r\nno swap will occur. You want to turn a into another permutation b after\r\nn moves. However, some elements of b are missing and are replaced with\r\n-1 instead. Count the number of ways to replace each -1 in b with some\r\ninteger from 1 to n so that b is a permutation and it is possible to\r\nturn a into b with a strength of s. Since the answer can be large,\r\noutput it modulo 998\r\n,244\r\n,353.\r\n", "solutions": ["#include<bits/stdc++.h>\nusing namespace std;\n#define N 300005\n#define ll long long\n#define mod 998244353\nint T,n,i,j,qwq,s,c[N],fl,p[N],a[N],b[N];\nll ans;\nint main(){\n\tcin>>T;\n\twhile(T--){\n\t\tcin>>n>>s;\n\t\tfor(i=1;i<=n;++i)cin>>a[i];\n\t\tfor(i=1;i<=n;++i)cin>>b[i],p[a[i]]=b[i];\n\t\tfl=0;\n\t\tfor(i=1;i<=n;++i){\n\t\t\tif(p[i]!=-1&&p[i]<i-s)fl=1;\n\t\t\tif(p[i]!=-1)c[p[i]]=1;\n\t\t}ans=1;\n\t\tj=1;qwq=0;\n\t\tfor(i=1;i<=n;++i){\n\t\t\twhile(j<=i+s&&j<=n){if(p[j]==-1)++qwq;++j;}\n\t\t\tif(!c[i]&&qwq==0)fl=1;\n\t\t\telse if(!c[i])ans=ans*qwq%mod,--qwq;\n\t\t}\n\t\tfor(i=1;i<=n;++i)c[i]=0;\n\t\tif(fl==1)cout<<\"0\\n\";\n\t\telse cout<<ans<<\"\\n\";\n\t}\n} "], "input": "", "output": "", "tags": ["brute force", "combinatorics", "greedy", "sortings", "trees", "two pointers"], "dificulty": "2300", "interactive": false}