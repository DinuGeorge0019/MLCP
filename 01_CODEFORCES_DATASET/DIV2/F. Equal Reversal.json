{"link": "https://codeforces.com//contest/1698/problem/F", "problemId": "1443731", "problem_idx": "F", "shortId": "1698F", "contest_number": "1698", "problem_submissions": {"F": [162124470, 162134445, 162141749, 162152934, 177654064, 216084662, 162196377, 162139942, 162355602, 162159626, 162690820], "E": [162087630, 162097353, 162109816, 162103301, 162126529, 162103867, 162097541, 162101116, 162109117, 162107378, 162110311, 162151314, 162112938, 162118264, 162120819, 162122603, 162129047, 162116428, 162113567, 162115753], "D": [162072106, 162078971, 162084618, 162091663, 162091608, 162080384, 162079742, 162083927, 162089597, 162090503, 162089228, 162119224, 162090409, 162087036, 162090706, 162084921, 162084389, 162101274, 162089309, 162089923], "C": [162065641, 162067112, 162066151, 162070233, 162081538, 162071658, 162069982, 162072714, 162074007, 162068223, 162076542, 162110420, 162075987, 162073114, 162072860, 162074806, 162073708, 162075609, 162078161, 162072891], "B": [162059543, 162058156, 162059458, 162060292, 162065675, 162061709, 162057759, 162058869, 162063379, 162060397, 162060756, 162115063, 162060812, 162061896, 162062035, 162068563, 162064118, 162063059, 162062265, 162061711], "A": [162055540, 162055455, 162055545, 162055770, 162057397, 162055986, 162055221, 162055288, 162058360, 162055918, 162055534, 162055768, 162055783, 162057223, 162056112, 162055836, 162057629, 162055832, 162056104, 162055773], "G": [162150291, 162713012]}, "name": "F. Equal Reversal", "statement": "There is an array a of length n. You may perform the following operation\r\non it: Choose two indices l and r where 1\r\nle l\r\nle r\r\nle n and a_l = a_r. Then, reverse the subsegment from the l-th to the\r\nr-th element, i. e. set [a_l, a_{l + 1},\r\nldots, a_{r - 1}, a_r] to [a_r, a_{r-1},\r\nldots, a_{l+1}, a_l]. You are also given another array b of length n\r\nwhich is a permutation of a. Find a sequence of at most n^2 operations\r\nthat transforms array a into b, or report that no such sequence exists.\r\n", "solutions": ["#include<bits/stdc++.h>\nusing namespace std;\n#define N 300005\n#define ll long long\n#define mod 998244353\n\nint T,n,i,j,qwq,s,fl,gg,k,p[N],c[N],a[N],b[N],op[N][2],tot;\nll ans;\nvoid OP(int l,int r){\n\top[++tot][0]=l;\n\top[tot][1]=r;\n\tfor(int i=l;i+i<l+r;++i){\n\t\tswap(a[i],a[l+r-i]);\n\t}\n}\nint main(){\n\tcin>>T;\n\twhile(T--){\n\t\tcin>>n;\n\t\tfor(i=1;i<=n;++i){\n\t\t\tcin>>a[i];\n\t\t}\n\t\tfor(i=1;i<=n;++i){\n\t\t\tcin>>b[i];\n\t\t}\n\t\ta[n+1]=a[n+2]=b[n+1]=b[n+2]=0;\n\t\tif(a[1]!=b[1]||a[n]!=b[n]){\n\t\t\tcout<<\"NO\\n\";continue;\n\t\t}\n\t\telse{\n\t\t\ttot=0;gg=0;\n\t\t\tfor(i=1;i<=n;++i){\n\t\t\t\tif(a[i]==b[i])continue;\n\t\t\t\tint fl=0;\n\t\t\t\tfor(j=i+1;j<=n;++j){\n\t\t\t\t\tif(a[j]==b[i]&&a[j+1]==a[i-1]){\n\t\t\t\t\t\tOP(i-1,j+1);fl=1;break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(fl)continue;\n\t\t\t\tfor(j=1;j<=n;++j)c[j]=0;\n\t\t\t\tfor(j=i+1;j<=n;++j){\n\t\t\t\t\tif(a[j]==b[i]&&a[j-1]==a[i-1]){\n\t\t\t\t\t\t++c[j-1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(j=i+1;j<=n;++j)c[j]+=c[j-1]; \n\t\t\t\tfl=0;\n\t\t\t\tfor(j=i-1;j<=n;++j){\n\t\t\t\t\tfor(k=j+1;k<=n;++k){\n\t\t\t\t\t\tif(a[j]==a[k]&&c[k-1]-c[j-1]){\n\t\t\t\t\t\t\tOP(j,k);fl=1;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(fl)break;\n\t\t\t\t}\n\t\t\t\tif(fl){\n\t\t\t\t\tfor(j=i+1;j<=n;++j){\n\t\t\t\t\t\tif(a[j]==b[i]&&a[j+1]==a[i-1]){\n\t\t\t\t\t\t\tOP(i-1,j+1);break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tgg=1;cout<<\"NO\\n\";break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!gg){\n\t\t\t\tcout<<\"YES\\n\";cout<<tot<<\"\\n\";\n\t\t\t\tfor(i=1;i<=tot;++i)cout<<op[i][0]<<\" \"<<op[i][1]<<\"\\n\";\n\t\t\t}\n\t\t}\n\t}\n}"], "input": "", "output": "", "tags": ["constructive algorithms", "graphs", "implementation", "math"], "dificulty": "2800", "interactive": false}