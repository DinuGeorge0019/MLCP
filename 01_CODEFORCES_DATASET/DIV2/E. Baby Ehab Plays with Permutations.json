{"link": "https://codeforces.com//contest/1516/problem/E", "problemId": "963910", "problem_idx": "E", "shortId": "1516E", "contest_number": "1516", "problem_submissions": {"D": [113744317, 113734893, 113732174, 113735658, 113736689, 113753948, 113752217, 113742709, 113733277, 113772079, 113758509, 113765675, 113749541, 113745751, 113782529, 113747411, 113750921, 113756461], "B": [113738828, 113716225, 113717222, 113722044, 113718441, 113730595, 113730731, 113724024, 113714979, 113731503, 113722149, 113770715, 113734481, 113725894, 113728293, 113726022, 113720823, 113721935], "A": [113731086, 113713802, 113713787, 113716079, 113713803, 113733865, 113718261, 113723529, 113713794, 113715315, 113715862, 113721754, 113725712, 113721388, 113714099, 113715023, 113714544], "C": [113728258, 113723880, 113721257, 113726835, 113726539, 113723017, 113756433, 113727327, 113747091, 113766829, 113742469, 113777547, 113761975, 113734529, 113746406, 113736795, 113734065, 113734539], "E": [113723992, 113762256, 113769222, 113761842, 113767857, 113776100, 113769406, 113784620, 113781943, 113761572, 113785543, 113747187, 113860370, 113784367, 113787186, 113776311, 113821800]}, "name": "E. Baby Ehab Plays with Permutations", "statement": "This time around, Baby Ehab will play with permutations. He has n cubes\r\narranged in a row, with numbers from 1 to n written on them. He\u2019ll make\r\nj operations. In each operation, he\u2019ll pick up 2 cubes and switch their\r\npositions.He\u2019s wondering: how many different sequences of cubes can I\r\nhave at the end? Since Baby Ehab is a turbulent person, he doesn\u2019t know\r\nhow many operations he\u2019ll make, so he wants the answer for every\r\npossible j between 1 and k.\r\n", "solutions": ["#include<bits/stdc++.h>\n#define re register\nusing namespace std;\ninline int read(){\n\tre int t=0;re char v=getchar();\n\twhile(v<'0')v=getchar();\n\twhile(v>='0')t=(t<<3)+(t<<1)+v-48,v=getchar();\n\treturn t;\n}\nconst int M=1e9+7;\ninline int ksm(re int x,re int y){\n\tre int s=1;\n\twhile(y){\n\t\tif(y&1)s=1ll*s*x%M;\n\t\tx=1ll*x*x%M,y>>=1;\n\t}\n\treturn s;\n}\ninline void add(re int &x,re int y){(x+=y)>=M?x-=M:x;}\nint f[602][402],n,K,B,C[6002],inv[6002],fac[6002],g[2002];\ninline int solve(re int n,re int K){\n\tmemset(f,0,sizeof(f));\n\tre int ans=0;\n\tK=min(K,n-1),B=min(n,2*K);\n\tfor(re int i=f[2][1]=f[0][0]=C[0]=inv[0]=fac[0]=1;i<=B;++i)C[i]=1ll*(n-i+1)*ksm(i,M-2)%M*C[i-1]%M,inv[i]=1ll*inv[i-1]*ksm(i,M-2)%M,fac[i]=1ll*fac[i-1]*i%M;\n\tfor(re int i=3;i<=B;++i)\n\t\tfor(re int j=1;j<=K;++j)\n\t\t\tf[i][j]=(1ll*f[i-1][j]*(i-1)+1ll*(i-1)*f[i-2][j-1])%M;\n\tfor(re int s=0;s<=B;++s)for(re int i=0;i<=K;++i)if(s-i<=K)add(ans,1ll*C[s]*f[s][i]%M);\n\treturn ans;\n}\nint main(){\n\tint n,K;\n\tn=read(),K=read();\n\tre int lst=1;g[0]=1;\n\tfor(re int i=1;i<=K;++i){\n\t\tre int x=solve(n,i);\n\t\tx=(x-g[i-1]+M)%M;\n\t\tg[i]=x;\n\t\tprintf(\"%d \",g[i]);\n\t}\n}"], "input": "", "output": "", "tags": ["combinatorics", "dp", "math"], "dificulty": "2500", "interactive": false}