{"link": "https://codeforces.com//contest/254/problem/E", "problemId": "2368", "problem_idx": "E", "shortId": "254E", "contest_number": "254", "problem_submissions": {"E": [2740484, 2741271, 2740417, 2740877, 2741373, 2743269, 2742126, 2743266, 2745430, 2771923], "C": [2738508, 2738068, 2738593, 2735008, 2736528, 2736699, 2737568, 2737352, 2745595, 2738018, 2737726, 2737295, 2738342, 2738512, 2737959, 2737102, 2738365, 2738534, 2738009], "B": [2737079, 2736879, 2739133, 2735037, 2735572, 2735546, 2736025, 2736861, 2735717, 2735630, 2736253, 2735557, 2735277, 2736333, 2737859, 2735812, 2735603, 2735733], "A": [2736146, 2734462, 2734865, 2741112, 2734113, 2735132, 2734336, 2735192, 2735720, 2734351, 2734166, 2734512, 2734291, 2734207, 2734482, 2734395, 2734573, 2734246, 2734420], "D": [2743106, 2742423, 2742158, 2746535, 2743203]}, "name": "E. Dormitory", "statement": "Student Vasya came to study in Berland State University from the\r\ncountry, so he is living in a dormitory. A semester has days, and in\r\neach of those days his parents send him some food. In the morning of the\r\n-th day he receives kilograms of food that can be eaten on that day and\r\non the next one (then the food goes bad and becomes unfit for\r\nconsumption).Every day Vasya eats kilograms of food. It is known that\r\nVasya\u2019s parents do not allow him to starve, so there always is enough\r\nfood for Vasya. Vasya has friends who sometimes live with him. Let\u2019s\r\nindex the friends from 1 to . Friend number lives with Vasya from day to\r\nday , inclusive. Also, the -th friend requires kilograms of food per\r\nday. Usually Vasya\u2019s friends eat in the canteen, but sometimes generous\r\nVasya feeds some of them. Every day Vasya can feed some friends who live\r\nwith him this day (or may feed nobody).Every time Vasya feeds his\r\nfriend, he gives him as much food as the friend needs for the day, and\r\nVasya\u2019s popularity rating at the University increases by one. Vasya\r\ncannot feed the same friend multiple times in one day. In addition, he\r\nknows that eating habits must be regular, so he always eats kilograms of\r\nfood per day.Vasya wants so choose whom he will feed each day of the\r\nsemester to make his rating as high as possible. Originally Vasya\u2019s\r\nrating is 0 because he is a freshman.\r\n", "solutions": ["#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint dp[405][405];\nint dpl[405][405];\nint re[405][405];\nint a[405];\nstruct node\n{\n\tint l,r,v,i;\n}b[405];\nbool cmp( node a, node b )\n{\n\treturn a.v < b.v;\n}\nint main()\n{\n\tfreopen(\"input.txt\",\"r\",stdin);\n\tfreopen(\"output.txt\",\"w\",stdout);\n\tmemset( dp, -1, sizeof( dp ));\n\n\tint n,v;\n\tscanf( \"%d%d\", &n, &v );\n\tfor ( int i = 1; i <= n; i++ )\n\t\tscanf( \"%d\", &a[i] );\n\n\tint m;\n\tscanf( \"%d\", &m );\n\tfor ( int i = 0; i < m; i++ )\n\t{\n\t\tscanf( \"%d%d%d\", &b[i].l, &b[i].r, &b[i].v );\n\t\tb[i].i = i + 1;\n\t}\n\n\tsort( b, b + m, cmp );\n\n\tdp[0][0] = 0;\n\n\tfor ( int i = 1; i <= n; i++ )\n\t{\n\t\tfor ( int j = 0; j <= 400; j++ )\n\t\tif ( dp[i-1][j] != -1 )\n\t\tif ( j + a[i] >= v )\n\t\t{\n\t\t\tint s = 0;\n\t\t\tint s1 = 0;\n\t\t\tif ( j >= v )\n\t\t\t{\n\t\t\t\tif ( dp[i][a[i]] < dp[i-1][j] ) \n\t\t\t\t{\n\t\t\t\t\tdp[i][a[i]] = dp[i-1][j];\n\t\t\t\t\tdpl[i][a[i]] = j;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tif ( dp[i][a[i]+j-v] < dp[i-1][j] ) \n\t\t\t\t{\t\n\t\t\t\t\t dp[i][a[i]+j-v] = dp[i-1][j];\n\t\t\t\t\t dpl[i][a[i]+j-v] = j;\n\t\t\t\t}\n\t\t\tfor ( int k = 0; k < m; k++ )\n\t\t\tif ( b[k].l <= i && b[k].r >= i && j + a[i] >= v + s + b[k].v )\n\t\t\t{\n\t\t\t\ts += b[k].v;\n\t\t\t\ts1++;\n\t\t\t\tif ( j >= v + s )\n\t\t\t\t{\n\t\t\t\t\tif ( dp[i][a[i]] < dp[i-1][j] + s1 ) \n\t\t\t\t\t{\n\t\t\t\t\t\tdp[i][a[i]] = dp[i-1][j] + s1;\n\t\t\t\t\t\tdpl[i][a[i]] = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif ( dp[i][a[i]+j-v-s] < dp[i-1][j] + s1 ) \n\t\t\t\t\t{\n\t\t\t\t\t\tdp[i][a[i]+j-v-s] = dp[i-1][j] + s1;\n\t\t\t\t\t\tdpl[i][a[i]+j-v-s] = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint mm = 0;\n\tfor ( int i = 0; i <= 400; i++ )\n\tif ( dp[n][i] > dp[n][mm] ) mm = i;\n\tint ans = dp[n][mm];\n\tprintf( \"%d\\n\", ans );\n\tfor ( int i = n; i >= 1; i-- )\n\t{\n//\t\tprintf(\"%d %d %d\\n\",i,dpl[i][mm],dp[i][mm]);\n//\t\tprintf(\"%d %d\\n\",i,dp[i][mm]);\n\t\tint k = dp[i][mm] - dp[i-1][dpl[i][mm]];\n\t\tmm = dpl[i][mm];\n\t\tfor( int j = 0; j < m; j++ )\n\t\t{\n\t\t\tif ( k == 0 ) break;\n\t\t\tif ( b[j].l <= i && b[j].r >= i )\n\t\t\t{\n\t\t\t\tre[i][++re[i][0]] = b[j].i;\n\t\t\t\tk--;\n\t\t\t}\n\t\t}\n\t}\n\tfor ( int i = 1; i <= n; i++ )\n\t{\n\t\tprintf(\"%d\",re[i][0]);\n\t\tfor ( int j = 1; j <= re[i][0]; j++ )\n\t\t\tprintf(\" %d\",re[i][j]);\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["dp", "implementation"], "dificulty": "2100", "interactive": false}