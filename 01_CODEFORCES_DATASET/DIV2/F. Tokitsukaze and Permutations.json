{"link": "https://codeforces.com//contest/1678/problem/F", "problemId": "1392743", "problem_idx": "F", "shortId": "1678F", "contest_number": "1678", "problem_submissions": {"B2": [156337748, 156324342, 156302784, 156304109, 156308344, 156307313, 156322367, 156310760, 156325161, 156311476, 156308386, 156305915, 156340054, 156311110, 156304777, 156312168], "D": [156335715, 156326293, 156332692, 156322049, 156327370, 156325356, 156338242, 156329859, 156336753, 156331010, 156328442, 156331166, 156332465, 156321050, 156331447, 156333951, 156332334, 156338244, 156323122], "F": [156333879, 156344881, 156345082, 156391888, 156343019], "E": [156321182, 156330122, 156338989, 156332813, 156332878, 156337640, 156329496, 156338879, 156328971, 156336106, 156338855, 156339814, 156337874, 156332857, 156334930, 156345535, 156346378, 156344343, 156329062], "C": [156315033, 156309829, 156314171, 156314151, 156314962, 156316870, 156314506, 156305197, 156319288, 156306512, 156317819, 156317128, 156326850, 156298687, 156320662, 156317477, 156325519, 156326778, 156317125], "B1": [156307022, 156305581, 156302876, 156303596, 156298834, 156302625, 156302689, 156299382, 156308181, 156300224, 156311800, 156302389, 156299357, 156299955, 156301798, 156299880, 156307813, 156302122], "A": [156300619, 156297387, 156296004, 156298038, 156295989, 156296408, 156296603, 156296410, 156307151, 156296016, 156301081, 156298593, 156296628, 156296518, 156297310, 156305728, 156296218, 156299051]}, "name": "F. Tokitsukaze and Permutations", "statement": "Tokitsukaze has a permutation p. She performed the following operation\r\nto p k times: in one operation, for each i from 1 to n - 1 in order, if\r\np_i > p_{i+1}, swap p_i, p_{i+1}. After exactly k times of operations,\r\nTokitsukaze got a new sequence a, obviously the sequence a is also a\r\npermutation.After that, Tokitsukaze wrote down the value sequence v of a\r\non paper. Denote the value sequence v of the permutation a of length n\r\nas v_i=\r\nsum_{j=1}^{i-1}[a_i < a_j], where the value of [a_i < a_j] define as if\r\na_i < a_j, the value is 1, otherwise is 0 (in other words, v_i is equal\r\nto the number of elements greater than a_i that are to the left of\r\nposition i). Then Tokitsukaze went out to work.There are three naughty\r\ncats in Tokitsukaze\u2019s house. When she came home, she found the paper\r\nwith the value sequence v to be bitten out by the cats, leaving several\r\nholes, so that the value of some positions could not be seen clearly.\r\nShe forgot what the original permutation p was. She wants to know how\r\nmany different permutations p there are, so that the value sequence v of\r\nthe new permutation a after k operations is the same as the v written on\r\nthe paper (not taking into account the unclear positions).Since the\r\nanswer may be too large, print it modulo 998\r\n,244\r\n,353.\r\n", "solutions": ["#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int N = 1e6 + 5;\nconst int mod = 998244353;\n\nint n, k;\nint v[N], mx[N], mn[N];\nint ans;\n\nvoid solve()\n{\n\tscanf(\"%d%d\", &n, &k);\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tscanf(\"%d\", &v[i]);\n\t\tmx[i] = i - 1;\n\t\tmn[i] = 0;\n\t}\n\tfor (int i = 1; i <= n - k; i++)\n\t{\n\t\tif (v[i] >= 0)\n\t\t\tmx[i + k] = min(mx[i + k], v[i] + k);\n\t\tif (v[i] > 0)\n\t\t\tmn[i + k] = v[i] + k;\n\t}\n\tans = 1;\n\tfor (int i = n - k + 1; i <= n; i++)\n\t\tif (v[i] > 0)\n\t\t\tans = 0;\n\tfor (int i = 1; i <= n; i++)\n\t\tans = 1ll * ans * (mx[i] - mn[i] + 1) % mod;\n\tprintf(\"%d\\n\", ans);\n}\n\nint main()\n{\n\tint T;\n\tscanf(\"%d\", &T);\n\twhile (T--)\n\t\tsolve();\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["dp", "math"], "dificulty": "2500", "interactive": false}