{
    "link": "https://codeforces.com//contest/841/problem/E",
    "problemId": "118955",
    "problem_idx": "E",
    "shortId": "841E",
    "contest_number": "841",
    "problem_submissions": {
        "E": [
            29577328,
            29576658
        ],
        "D": [
            29573001,
            29573684,
            29573988,
            29567705,
            29568708,
            29563027,
            29619966,
            29619959,
            29570707,
            29579930,
            29635245,
            29578546,
            29570875,
            29573682,
            29571760,
            29573458,
            29572414,
            29573926,
            29573655,
            29572331,
            29574140,
            29574859
        ],
        "C": [
            29568878,
            29565561,
            29563832,
            29563617,
            29560709,
            29568671,
            29561287,
            29566153,
            29562441,
            29563021,
            29564839,
            29566123,
            29561033,
            29567576,
            29565786,
            29566018,
            29563013,
            29569683,
            29564547,
            29563613
        ],
        "B": [
            29566528,
            29560935,
            29560133,
            29558137,
            29559052,
            29565221,
            29558422,
            29561026,
            29559272,
            29559733,
            29560675,
            29562151,
            29563589,
            29559692,
            29560534,
            29559741,
            29558805,
            29561017,
            29560298,
            29558218
        ],
        "A": [
            29564846,
            29556330,
            29556266,
            29556257,
            29556527,
            29557299,
            29556212,
            29556530,
            29556354,
            29556255,
            29556386,
            29557394,
            29556831,
            29556353,
            29556868,
            29557136,
            29556377,
            29556612,
            29557465,
            29556310
        ]
    },
    "name": "E. On the Bench",
    "statement": "A year ago on the bench in public park Leha found an array of numbers.\r\nLeha believes that permutation is right if for all condition, that is\r\nnot perfect square, holds. Leha wants to find number of right\r\npermutations modulo .\r\n",
    "solutions": [
        "#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#define N 1000\n#include<map>\n#define MOD 1000000007\nusing namespace std;\nlong long f[N],h[2][N][N];\nstruct node{\n\tint a[11];\n\tvoid clear(){\n\t\twhile (a[0])a[a[0]--]=0;\n\t}\n}s;\nmap<node,int>g;\nint a[N];\nint n;\nbool operator<(const node&a,const node&b){\n\tfor (int i=0;i<=a.a[0];i++)\n\t\tif (a.a[i]<b.a[i])return 1;\n\t\telse\n\t\t\tif (a.a[i]>b.a[i])return 0;\n\treturn 0;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++){\n\t\tint x;\n\t\ts.clear();\n\t\tscanf(\"%d\",&x);\n\t\tfor (int j=2;j*j<=x;j++)\n\t\t\tif (!(x%j)){\n\t\t\t\tint y=0;\n\t\t\t\twhile (!(x%j))x/=j,y^=1;\n\t\t\t\tif (y)s.a[++s.a[0]]=j;\n\t\t\t}\n\t\tif (x!=1)s.a[++s.a[0]]=x;\n\t\tif (!g[s])g[s]=++a[0];\n\t\ta[g[s]]++;\n\t}\n\tf[0]=1;\n\tint all=1;\n\tfor (int i=1;i<=a[0];i++){\n\t\tfor (int j=0;j<=n;j++)\n\t\t\th[0][j][0]=f[j],f[j]=0;\n\t\tint bz=0,bz1=1;\n\t\tfor (int j=1;j<=a[i];j++,swap(bz,bz1)){\n\t\t\tfor (int k=0;k<=n;k++)\n\t\t\t\tfor (int l=0;l<=a[i];l++)\n\t\t\t\t\tif (h[bz][k][l]){\n\t\t\t\t\t\tint sum=0;\n\t\t\t\t\t\tif (k)(h[bz1][k-1][l]+=h[bz][k][l]*k)%=MOD,sum+=k;\n\t\t\t\t\t\t(h[bz1][k][l+1]+=h[bz][k][l]*((j-1)*2-l))%=MOD,sum+=(j-1)*2-l;\n\t\t\t\t\t\t(h[bz1][k][l]+=h[bz][k][l]*(all-sum))%=MOD;\n\t\t\t\t\t\th[bz][k][l]=0;\n\t\t\t\t\t}\n\t\t\tall++;\n\t\t}\n\t\tfor (int j=0;j<=n;j++)\n\t\t\tfor (int k=0;k<=a[i];k++)\n\t\t\t\tif (h[bz][j][k]){\n\t\t\t\t\t(f[j+k]+=h[bz][j][k])%=MOD;\n\t\t\t\t\th[bz][j][k]=0;\n\t\t\t\t}\n\t}\n\tcout<<f[0];\n\treturn 0;\n}"
    ],
    "input": "",
    "output": "",
    "tags": [],
    "dificulty": "2500",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV2\\E. On the Bench.json",
    "editorial_link": "https://codeforces.com/blog/entry/53943?locale=en",
    "editorial": null,
    "hint": []
}