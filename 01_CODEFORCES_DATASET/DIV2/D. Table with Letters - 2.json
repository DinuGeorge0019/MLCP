{"link": "https://codeforces.com//contest/253/problem/D", "problemId": "2358", "problem_idx": "D", "shortId": "253D", "contest_number": "253", "problem_submissions": {"E": [2726944, 2726770, 2723241, 2726790, 2727978, 2727471, 2730692, 2727089, 2733327], "D": [2723881, 2724571, 2724941, 2724183, 2724072, 2730055, 2725910, 2724288, 2727979, 2726091, 2724937, 2724056, 2724791, 2726548, 2727374, 2727845, 2724772, 2727700, 2727671], "C": [2722572, 2722281, 2724549, 2722354, 2728524, 2725077, 2722977, 2724138, 2725868, 2723657, 2726470, 2725360, 2723760, 2725532, 2724133, 2723644, 2723308, 2726933, 2724303, 2722964], "B": [2721049, 2720520, 2723865, 2720653, 2721139, 2720528, 2729702, 2729645, 2721283, 2721143, 2722792, 2721898, 2721343, 2721641, 2721718, 2723762, 2722392, 2721474, 2721728, 2725310, 2722068, 2720627], "A": [2719721, 2719583, 2723434, 2725505, 2726928, 2719479, 2719939, 2719790, 2720497, 2719471, 2719992, 2720388, 2727234, 2723792, 2722012, 2720226, 2719749, 2721562, 2720002, 2728636]}, "name": "D. Table with Letters - 2", "statement": "Vasya has recently started to learn English. Now he needs to remember\r\nhow to write English letters. He isn\u2019t sure about some of them, so he\r\ndecided to train a little.He found a sheet of squared paper and began\r\nwriting arbitrary English letters there. In the end Vasya wrote lines\r\ncontaining characters each. Thus, he got a rectangular table, each cell\r\nof the table contained some English letter. Let\u2019s number the table rows\r\nfrom top to bottom with integers from 1 to , and columns from left to\r\nright with integers from 1 to .After that Vasya looked at the resulting\r\nrectangular table and wondered, how many subtables are there, that\r\nmatches both following conditions: the subtable contains at most cells\r\nwith \"\" letter; all letters, located in all four corner cells of the\r\nsubtable, are equal. Formally, a subtable\u2019s definition is as follows. It\r\nis defined by four integers such that , . Then the subtable contains all\r\nsuch cells ( is the row number, is the column number), for which the\r\nfollowing inequality holds . The corner cells of the table are cells , ,\r\n, .Vasya is already too tired after he\u2019s been writing letters to a piece\r\nof paper. That\u2019s why he asks you to count the value he is interested in.\r\n", "solutions": ["#include <stdio.h>\n#include <string.h>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\n\nchar table[444][444];\n\nint totac[444][444];\nint q[26][444];\nint f[26];\nint e[26];\n\nint main(void)\n{\n    freopen(\"input.txt\",\"rt\",stdin);\n    freopen(\"output.txt\",\"wt\",stdout);\n    int n = 0;\n    int m = 0;\n    int k = 0;\n    scanf(\"%d %d %d\",&n,&m,&k);\n    for(int i = 1;i <= n;i++)\n    {\n        scanf(\"%s\",table[i]+1);\n    }\n\n    for(int i = 1;i <= n;i++)\n    {\n        for(int j = 1;j <= m;j++)\n        {\n            totac[i][j] = totac[i][j-1]+ ( table[i][j] == 'a' );\n        }\n    }\n\n    ll ans = 0;\n    for(int l = 1;l <= m;l++)\n    {\n        for(int r = l+1;r <= m;r++)\n        {\n            memset(f,0,sizeof(f));\n            memset(e,0,sizeof(e));\n            int tota = 0;\n            for(int i = 1;i <= n;i++)\n            {   \n                if(table[i][l] == table[i][r])\n                {\n                    int ch = table[i][l]-'a';\n                    q[ch][e[ch]++] = tota;\n                    tota += totac[i][r]-totac[i][l-1];\n                    while(f[ch]+1 < e[ch] && tota-q[ch][f[ch]] > k) f[ch]++;\n                    ans += e[ch]-f[ch]-1;\n                }\n                else tota += totac[i][r]-totac[i][l-1];\n            }\n        }\n    }\n    printf(\"%I64d\\n\",ans);\n    while(getchar() != EOF);\n    return 0;\n}\n"], "input": "", "output": "", "tags": ["brute force", "two pointers"], "dificulty": "2000", "interactive": false}