{
    "link": "https://codeforces.com//contest/501/problem/D",
    "problemId": "20655",
    "problem_idx": "D",
    "shortId": "501D",
    "contest_number": "501",
    "problem_submissions": {
        "D": [
            9410957,
            9411339,
            9411793,
            9412714,
            9412830,
            9413378,
            9413495,
            9413859,
            9416597,
            9414226,
            9414777,
            9414880,
            9414082,
            9414871,
            9413282,
            9414476,
            9414234,
            9413065,
            9413605,
            9413446,
            9414020
        ],
        "C": [
            9409710,
            9412812,
            9409915,
            9410635,
            9411145,
            9410890,
            9410381,
            9411803,
            9411723,
            9411491,
            9410908,
            9413785,
            9412825,
            9408972,
            9410063,
            9413464,
            9416221,
            9416007
        ],
        "B": [
            9408651,
            9408711,
            9412680,
            9409222,
            9408915,
            9408969,
            9409184,
            9409368,
            9409570,
            9409614,
            9412592,
            9408622,
            9409821,
            9442325,
            9413740,
            9410394,
            9410355,
            9410485
        ],
        "A": [
            9407105,
            9407522,
            9412385,
            9407579,
            9407165,
            9407296,
            9407604,
            9407397,
            9407151,
            9407485,
            9407144,
            9407155,
            9408421,
            9441866,
            9414917,
            9414709,
            9407354,
            9407430,
            9407583,
            9409049
        ],
        "E": [
            9423665,
            9415217
        ]
    },
    "name": "D. Misha and Permutations Summation",
    "statement": "Letâ€™s define the sum of two permutations and of numbers as permutation ,\r\nwhere is the -th lexicographically permutation of numbers (counting from\r\nzero), and is the number of permutation in the lexicographical order.For\r\nexample, , Misha has two permutations, and . Your task is to find their\r\nsum.Permutation is called to be lexicographically smaller than\r\npermutation , if for some following conditions hold: .\r\n",
    "solutions": [
        "/*\n    Look at me!\n    Look at me!\n    Look at how large the monster inside me has become!\n*/\n\n#include<fstream>\n#include<iostream>\n#include<cstdio>\n#include<map>\n#include<set>\n#define FIT(a,b) for(vector<int >::iterator a=b.begin();a!=b.end();a++)\n#define FITP(a,b) for(vector<pair<int,int> >::iterator a=b.begin();a!=b.end();a++)\n#define RIT(a,b) for(vector<int>::reverse_iterator a=b.end();a!=b.begin();++a)\n#include<stack>\n#define ROF(a,b,c) for(int a=b;a>=c;--a)\n#include<vector>\n#include<algorithm>\n#define FOR(a,b,c) for(int a=b;a<=c;++a)\n#define REP(a,b) for(register int a=0;a<b;++a)\n#include<cstring>\n#include<bitset>\n#include<cmath>\n#include<iomanip>\n#include<ctime>\n#define f cin\n#define g cout\n#include<queue>\n#define debug cerr<<\"OK\";\n#define pii pair<int,int>\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\n#define ll long long\n#define ull unsigned long long\n#define mod 666013\n#define inf 1<<30\n#define N 2000100\n#define DIM 10000000\nusing namespace std;\n/*int dx[]={0,0,0,1,-1};\nint dy[]={0,1,-1,0,0};*/\n\nint A1[N],kkt[N],p,A2[N],A3[N],P[N],Q[N],sol[N],n;\nvoid upd(int A[],int poz,int val)\n{\n    for(;poz<=n;poz+=poz&-poz)\n        A[poz]+=val;\n}\nint find(int A[],int poz)\n{\n    int sum=0;\n    for(;poz;poz-=poz&-poz)\n        sum+=A[poz];\n    return sum;\n}\nint cb(int x)\n{\n    int st=1;\n    int dr=n;\n    int best=0;\n    while(st<=dr)\n    {\n        int mij=(st+dr)>>1;\n        if(find(A3,mij)>=x)\n        {\n            best=mij;\n            dr=mij-1;\n        }\n        else\n            st=mij+1;\n    }\n    return best;\n}\n\nint main ()\n{\n\n    #ifndef ONLINE_JUDGE\n    freopen(\"a.in\",\"r\",stdin);\n    freopen(\"a.out\",\"w\",stdout);\n    #endif\n\n    f>>n;\n    FOR(i,1,n)\n    f>>P[i];\n    FOR(i,1,n)\n    f>>Q[i];\n\n    FOR(i,1,n)\n    {\n        P[i]++;\n        Q[i]++;\n    }\n\n    FOR(i,1,n)\n    {\n        upd(A1,i,1);\n        upd(A2,i,1);\n        upd(A3,i,1);\n    }\n\n    FOR(i,1,n)\n    {\n        int a=find(A1,P[i]);\n        int b=find(A2,Q[i]);\n        upd(A1,P[i],-1);\n        upd(A2,Q[i],-1);\n        a--;\n        b--;\n        a+=b;\n        p=i;\n        kkt[i]=a;\n        while(kkt[p]>=n-p+1)\n        {\n            kkt[p]-=n-p+1;\n            --p;\n            kkt[p]++;\n        }\n    }\n    FOR(i,1,n)\n    {\n        sol[i]=cb(kkt[i]+1);\n        upd(A3,sol[i],-1);\n    }\n    FOR(i,1,n)\n    sol[i]--;\n    FOR(i,1,n)\n    g<<sol[i]<<\" \";\n    return 0;\n}\n"
    ],
    "input": "",
    "output": "",
    "tags": [
        "data structures"
    ],
    "dificulty": "2000",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV2\\D. Misha and Permutations Summation.json",
    "editorial_link": "https://codeforces.com//blog/entry/15743",
    "editorial": "To solve the problem, one need to be able to find the index of given permutation in lexicographical order and permutation by its index. We will store indices in factorial number system. Thus number x is represented as . You can find the rules of the transform here.\n\nTo make the transform, you may need to use data structures such as binary search tree or binary indexed tree (for maintaining queries of finding k-th number in the set and finding the amount of numbers less than given one).\n\nSo, one need to get indices of the permutations, to sum them modulo n! and make inverse transform. You can read any accepted solution for better understanding.",
    "hint": []
}