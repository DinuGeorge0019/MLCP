{"link": "https://codeforces.com//contest/651/problem/D", "problemId": "50877", "problem_idx": "D", "shortId": "651D", "contest_number": "651", "problem_submissions": {"E": [16577901, 16576105, 16577885, 16579030, 16577600, 16579254, 16583684, 16612963, 16634108, 16579601, 16597899, 16582932, 16628107, 16578759], "D": [16573047, 16572719, 16574678, 16571901, 16569773, 16573081, 16571528, 16576891, 16571074, 16608055, 16590874, 16572871, 16572832, 16576303, 16574260, 16573986, 16574407, 16572633, 16573717, 16573769, 16572434], "C": [16565876, 16566691, 16563105, 16566656, 16570973, 16568950, 16566771, 16566951, 16566152, 16563979, 16567340, 16568555, 16569181, 16568020, 16565103, 16569049, 16566497, 16567339, 16568697, 16567246], "B": [16564324, 16569482, 16564950, 16565243, 16571584, 16566683, 16565016, 16565556, 16564840, 16565123, 16565306, 16566113, 16563647, 16564785, 16567065, 16568003, 16562805, 16566201, 16565282], "A": [16563044, 16565248, 16566177, 16563187, 16572713, 16564825, 16563775, 16564326, 16563005, 16562965, 16563558, 16563677, 16562755, 16562903, 16565600, 16564448, 16566878, 16565167, 16563473]}, "name": "D. Image Preview", "statement": "Vasya\u2019s telephone contains photos. Photo number 1 is currently opened on\r\nthe phone. It is allowed to move left and right to the adjacent photo by\r\nswiping finger over the screen. If you swipe left from the first photo,\r\nyou reach photo . Similarly, by swiping right from the last photo you\r\nreach photo . It takes seconds to swipe from photo to adjacent.For each\r\nphoto it is known which orientation is intended for it horizontal or\r\nvertical. Phone is in the vertical orientation and be rotated. It takes\r\nsecond to change orientation of the photo.Vasya has seconds to watch\r\nphotos. He want to watch as many photos as possible. If Vasya opens the\r\nphoto for the first time, he spends second to notice all details in it.\r\nIf photo is in the wrong orientation, he spends seconds on rotating it\r\nbefore watching it. If Vasya has already opened the photo, he just skips\r\nit (so he doesn\u2019t spend any time for watching it or for changing its\r\norientation). It is not allowed to skip unseen photos.Help Vasya find\r\nthe maximum number of photos he is able to watch during seconds.\r\n", "solutions": ["# include <iostream>\n# include <algorithm>\n# include <cstdio>\n# include <cstdlib>\n# include <ctime>\n# include <cmath>\n# include <set>\n# include <vector>\n# include <map>\n# include <queue>\n\n#define F first\n#define S second\n#define mp make_pair\n#define pb push_back\n\n#define N 555555\n\nusing namespace std;\n\nint n;\nint a, b;\nint T;\nint is[N];\nint pr[N];\n\nint main () {\n\tios_base::sync_with_stdio(0);\n\tcin >> n >> a >> b >> T;\n\tfor(int i = 0; i < n; ++i) {\n\t\tchar d;\n\t\tcin >> d;\n\t\tis[i] = d == 'w';\n\t\tpr[i] = is[i];\n\t\tif(i) pr[i] += pr[i - 1];\n\t}\n\tif(is[0] * b + 1 > T) {\n\t\tcout << 0;\n\t\treturn 0;\n\t}\n\n\tint l = 0;\n\tint needs = 0;\n\tfor( ; ; ) {\n\t\tif(is[l]) {\n\t\t\tneeds += b;\n\t\t}\n\t\tneeds++;\n\t\tif(needs > T) break;\n\t\tneeds += a;\n\n\t\tl = (l - 1 + n) % n;\n\t\tif(l == 0) break;\n\t}\n\tif(l == 0) {\n\t\tcout << n;\n\t\treturn 0;\n\t}\n\tint ans = n - 1 - l + 1;\n\n\tfor(int r = 1; r < n; ++r) {\n\t\tint ws = pr[r];\n\t\tws += pr[n - 1] - pr[l];\n\n\t\twhile(l != 0 && ws * b + r + 1 + (n - 1 - l) + a * (r + (n - 1 - l)) + a * min(r, n - 1 - l) > T) {\n\t\t\tl = (l + 1) % n;\n\t\t\tws = pr[r];\n\t\t\tws += pr[n - 1] - pr[l];\n\t\t}\n\t\tif(l == 0) {\n\t\t\tbreak;\n\t\t}\n\t\tans = max(ans, r + 1 + n - 1 - l);\n\t}\n\tcout << ans;\n\n\n\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["binary search", "brute force", "dp", "two pointers"], "dificulty": "1900", "interactive": false}