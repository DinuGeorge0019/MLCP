{"link": "https://codeforces.com//contest/659/problem/G", "problemId": "53561", "problem_idx": "G", "shortId": "659G", "contest_number": "659", "problem_submissions": {"G": [17048942, 17051082, 17053499, 17056302, 17057443, 17052627, 17057183, 17057162, 17076131, 17045172, 17053158, 17056518], "F": [17047834, 17053774, 17049969, 17050820, 17052174, 17056026, 17050842, 17053250, 17050852, 17050686, 17050499, 17050611, 17052481, 17064456, 17051398, 17051617, 17051540, 17050465], "E": [17042676, 17043109, 17045262, 17042718, 17047927, 17046574, 17040925, 17048651, 17040880, 17052066, 17041600, 17046501, 17046168, 17045890, 17045191, 17046107, 17048339, 17043013, 17046378], "D": [17040164, 17050025, 17044036, 17045724, 17041432, 17042750, 17045206, 17042744, 17045258, 17053191, 17040131, 17041993, 17045154, 20417581, 17042968, 17047543, 17044200, 17041493, 17046806, 17044650], "B": [17039409, 17039152, 17039943, 17044093, 17038870, 17038621, 17044105, 17040190, 17043575, 17055274, 17038055, 17038759, 17039771, 17039240, 17039293, 17039271, 17043285, 17040658, 17040098], "C": [17039394, 17040359, 17041969, 17039075, 17037528, 17039602, 17038719, 17041409, 17038514, 17053925, 17038798, 17040270, 17038600, 17041901, 17040814, 17041935, 17039324, 17039760, 17041613], "A": [17037687, 17039404, 17037482, 17037338, 17052801, 17037726, 17040138, 17037138, 17055546, 17037115, 17039098, 17037248, 17037187, 17037309, 17038070, 17037352, 17037563]}, "name": "G. Fence Divercity", "statement": "Long ago, Vasily built a good fence at his country house. Vasily calls a\r\nfence , if it is a series of consecutively fastened vertical boards of\r\ncentimeter width, the height of each in centimeters is . The house owner\r\nremembers that the height of the -th board to the left is .Today Vasily\r\ndecided to change the design of the fence he had built, by cutting his\r\ntop connected part so that the fence remained good. The cut part should\r\nconsist of only the upper parts of the boards, while the adjacent parts\r\nmust be interconnected (share a non-zero length before cutting out of\r\nthe fence).You, as Vasily\u2019s curious neighbor, will count the number of\r\npossible ways to cut exactly one part as is described above. Two ways to\r\ncut a part are called distinct, if for the remaining fences there is\r\nsuch , that the height of the -th boards vary.As Vasily\u2019s fence can be\r\nvery high and long, get the remainder after dividing the required number\r\nof ways by .\r\n", "solutions": ["#include <bits/stdc++.h>\n#define MOD 1000000007\nusing namespace std;\nint f[1000005][2], h[1000005], ans, n, m;\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++) scanf(\"%d\", h + i);\n\th[n + 1] = 2000000000;\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tint mjy = min(h[i - 1], h[i]), mzl = min(h[i], h[i + 1]);\n\t\tif (mjy <= mzl) (f[i][1] += 1LL * f[i - 1][1] * (mjy - 1) % MOD) %= MOD;\n\t\telse\n\t\t{\n\t\t\t(f[i][1] += 1LL * f[i - 1][1] * (mzl - 1) % MOD) %= MOD;\n\t\t\t(f[i][0] += 1LL * f[i - 1][1] * (mjy - mzl) % MOD) %= MOD;\n\t\t}\n\t\t(f[i][0] += h[i] - mzl) %= MOD;\n\t\t(f[i][1] += mzl - 1) %= MOD;\n\t\t(ans += (f[i][0] + f[i][1]) % MOD) %= MOD;\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["combinatorics", "dp", "number theory"], "dificulty": "2300", "interactive": false}