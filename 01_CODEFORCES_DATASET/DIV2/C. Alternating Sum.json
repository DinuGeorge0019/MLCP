{"link": "https://codeforces.com//contest/964/problem/C", "problemId": "175443", "problem_idx": "C", "shortId": "964C", "contest_number": "964", "problem_submissions": {"E": [37409419, 37412882, 37412551, 37537258], "D": [37405314, 37405406, 37407186, 37404280, 37404169, 37408650, 37406709, 37408309, 37407949, 37409754, 37405372, 37408312, 37409242, 37407775, 37408039, 37410204, 37408800, 37409358, 37410244, 37411197], "C": [37403398, 37403877, 37404364, 37401413, 37406057, 37403278, 37403765, 37403218, 37404076, 37402918, 37409929, 37404535, 37403561, 37404289, 37406113, 37406564, 37405628, 37403427, 37405874, 37402908], "B": [37401124, 37399470, 37399569, 37398293, 37401006, 37399516, 37400304, 37400317, 37401519, 37403572, 37400503, 37400997, 37400932, 37399240, 37399448, 37399083, 37401068, 37406879, 37401310, 37399198], "A": [37400130, 37398594, 37414688, 37397760, 37399494, 37397960, 37399304, 37398291, 37400088, 37398209, 37398067, 37399344, 37399606, 37397801, 37398329, 37398304, 37399455, 37398145, 37398241, 37397856]}, "name": "C. Alternating Sum", "statement": "You are given two integers a and b. Moreover, you are given a sequence\r\ns_0, s_1,\r\ndots, s_{n}. All values in s are integers 1 or -1. It\u2019s known that\r\nsequence is k-periodic and k divides n+1. In other words, for each k\r\nleq i\r\nleq n it\u2019s satisfied that s_{i} = s_{i - k}.Find out the remainder of\r\ndivision of\r\nsum\r\nlimits_{i=0}^{n} s_{i} a^{n - i} b^{i} by 10^{9} + 9.\r\n", "solutions": ["#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nconst int mod = 1e9 + 9;\n\nint power(int a, int times) {\n\tint rt = 1, base = a;\n\twhile (times) {\n\t\tif (times & 1) rt = (long long)rt * base % mod;\n\t\tbase = (long long)base * base % mod;\n\t\ttimes >>= 1;\n\t}\n\treturn rt;\n}\n\nconst int maxn = 1e5 + 7;\nint main() {\n\t//freopen(\"input.txt\", \"r\", stdin);\n\tstatic char s[maxn];\n\tint n, a, b, k;\n\tscanf(\"%d%d%d%d\", &n, &a, &b, &k);\n\t\n\t\n\tint times = (n + 1) / k;\n\tscanf(\"%s\", s);\n\t\n\tint inv_a = power(a, mod - 2);\n\tint inv_b = power(b, mod - 2);\n\t\n\tint head = power(a, n);\n\tint gap = (long long)power(b, k) * power(inv_a, k) % mod;\n\tint ans = 0;\n\tfor (int i = 0; i < k; i++) {\n\t\tint flag = 1;\n\t\tif (s[i] == '-') flag = -1;\n\t\tif (gap == 1) ans = (ans + flag * (long long)head * times) % mod;\n\t\telse ans = (ans + flag * (long long)head * (1 - power(gap, times)) % mod * power(1 - gap, mod - 2) % mod) % mod;\n\t\thead = (long long)head * b % mod * inv_a % mod;\n\t}\n\tcout << (ans + mod) % mod << endl;\n\treturn 0;\n}\n"], "input": "", "output": "", "tags": ["math", "matrices", "number theory"], "dificulty": "1800", "interactive": false}