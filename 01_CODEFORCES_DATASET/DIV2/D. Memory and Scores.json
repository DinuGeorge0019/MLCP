{"link": "https://codeforces.com//contest/712/problem/D", "problemId": "71117", "problem_idx": "D", "shortId": "712D", "contest_number": "712", "problem_submissions": {"D": [20507730, 20508895, 20509129, 20505101, 20510051, 20509882, 20510530, 20511320, 20512204, 20511999, 20512122, 20512350, 20512028, 20513044, 20512560], "C": [20505002, 20505522, 20506144, 20510391, 20505597, 20504534, 20504843, 20508941, 20505398, 20506289, 20507889, 20508095, 20508629, 20504557, 20504038], "B": [20502570, 20502790, 20502869, 20506557, 20504008, 20505714, 20503852, 20502736, 20502126, 20503884, 20504083, 20503644, 20503939, 20502344, 20505823], "A": [20501558, 20501769, 20503817, 20505672, 20502269, 20506798, 20505565, 20501411, 20501490, 20502265, 20504252, 20502843, 20503826, 20501859, 20501663]}, "name": "D. Memory and Scores", "statement": "Memory and his friend Lexa are competing to get higher score in one\r\npopular computer game. Memory starts with score and Lexa starts with\r\nscore . In a single turn, both Memory and Lexa get some integer in the\r\nrange (i.e. one integer among ) and add them to their current scores.\r\nThe game has exactly turns. Memory and Lexa, however, are not good at\r\nthis game, so they both always get a random integer at their turn.Memory\r\nwonders how many possible games exist such that he ends with a strictly\r\nhigher score than Lexa. Two games are considered to be different if in\r\nat least one turn at least one player gets different score. There are\r\ngames in total. Since the answer can be very large, you should print it\r\nmodulo . Please solve this problem for Memory.\r\n", "solutions": ["#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<iostream>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define ff first\n#define ss second\n#define mp make_pair\n#define pi pair<int,int>\nusing namespace std;\nconst int M=110005;\nconst int inf=1e9+7;\ntypedef long long ll;\ntypedef long double lb;\ninline void read(int &x){x=0; char ch=getchar();while(ch<'0') ch=getchar();while(ch>='0'){x=x*10+ch-48; ch=getchar();}}\n//------------------------------------------head---------------------------------------------------//\nll f[105][500005];\nll prev[500005];\nconst ll P=1e9+7;\nint main()\n{\n\tint a,b,n,k; read(a); read(b); read(k); read(n); int up=n*(k*2+1)+a-b+M;\n\tf[0][a-b+M]=1; int zyw=2*k+1;\n\trep(i,1,n)\n\t{\n\t\tprev[0]=0;\n\t\trep(j,1,up) prev[j]=f[i-1][j]+prev[j-1];\n\t\tll yjq=0; rep(j,1,zyw) yjq+=f[i-1][j]*(ll)j; yjq%=P;\n\t\trep(j,zyw,up)\n\t\t{\n\t\t\tf[i][j]+=yjq; if(f[i][j]>=P) f[i][j]-=P;\n\t\t\tyjq-=(prev[j]-prev[j-zyw]); yjq+=(ll)zyw*f[i-1][j+1];\n\t\t\tif(yjq) yjq%=P; yjq+=P; if(yjq>=P) yjq-=P;\n\t\t}\n\t\tyjq=0; rep(j,up-zyw+2,up) yjq+=f[i-1][j]*(ll)(up-j+1); yjq%=P;\n\t\tper(j,up-zyw+1,zyw)\n\t\t{\n\t\t\tf[i][j]+=yjq; if(f[i][j]>=P) f[i][j]-=P;\n\t\t\tyjq-=(prev[j+zyw-1]-prev[j]); yjq+=(ll)(zyw-1)*f[i-1][j];\n\t\t\tif(yjq) yjq%=P; yjq+=P; if(yjq>=P) yjq-=P;\n\t\t}\n\t}\n\tll ans=0;\n\trep(i,M+1,up) ans+=f[n][i];\n\tprintf(\"%I64d\\n\",ans%P);\n\treturn 0;\n}\n"], "input": "", "output": "", "tags": ["combinatorics", "dp", "math"], "dificulty": "2200", "interactive": false}