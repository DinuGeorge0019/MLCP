{"link": "https://codeforces.com//contest/467/problem/E", "problemId": "13812", "problem_idx": "E", "shortId": "467E", "contest_number": "467", "problem_submissions": {"D": [7834909, 7835438, 7836074, 7839180, 7840905, 7839272, 7841167, 7841073, 7840587, 7837720, 7843047, 7843018, 7842881, 7841429], "B": [7829550, 7830678, 7829249, 7829723, 7829417, 7832664, 7830103, 7831256, 7830256, 7839394, 7831541, 7829075, 7831182, 7833602, 7829553, 7831084, 7831150, 7831114], "C": [7829448, 7830619, 7831831, 7832345, 7832107, 7831414, 7832445, 7849938, 7833649, 7834054, 7831686, 7835057, 7832606, 7832750, 7835657, 7830837, 7832681, 7833554, 7834610, 7838020], "A": [7827537, 7827380, 7827697, 7827343, 7827487, 7831859, 7828592, 7827610, 7827679, 7840381, 7827513, 7827429, 7827326, 7831348, 7827641, 8494956, 7828703, 7827713, 7829389], "E": [7852679]}, "name": "E. Alex and Complicated Task", "statement": "After you have read all the problems, probably, you think Alex is genius\r\nperson. That\u2019s true! One day he came up with the following task.Given a\r\nsequence of integer numbers . You are to find a longest sequence , that\r\nsatisfies the following conditions: for all valid integer ; for all\r\nvalid integer ; sequence is subsequence of (not necessarily contiguous\r\nsubsequence). And finally... Alex had given this complicated task to\r\nGeorge, and George gave it to you. Help George to cope with the task.\r\n", "solutions": [" /*                                                                       \nnikto ne smeet obijat' malen'kogo begemotika\n  _ _ _ _\n /.  _  .\\\n|   /_\\   |\n|_ _ _ _ _|\n   NIKTO                                                             \n*/\n#include <iostream>\n#include <stdlib.h>\n#include <stdio.h>\n#include <string.h>\n#include <algorithm>\n#include <set>\n#include <cassert>\n#include <math.h>\n#include <vector>\n#include <map>\n#include <time.h>\nusing namespace std;           \n#define forn(i, x, n) for(int i = x; i <= n; ++i)\n#define for1(i, n, x) for(int i = n; i >= x; --i)\n#define file \"\"//\".\"\n#define ll long long  \n#define ull unsigned long long\n#define PII pair <int, int>\n#define mp make_pair\n#define fr first\n#define sec second                       \n#define pb push_back\n                                             \nconst int maxn = 500500;\nconst int INF = int(1e9) + 7;\n                  \nint ans, res[maxn];\n\nmap <int, int> cnt, Left;\npair < PII, int > st[maxn];\nint sz;\n\nvoid Add_ans(int a, int b) {\n\tres[++ans] = a;\n\tres[++ans] = b;\n\tres[++ans] = a;\n\tres[++ans] = b;\n\tsz = 0;\n\tcnt.clear();\n\tLeft.clear();\n}\n\nint a[maxn];    \nint n;              \n\nbool added;\nint main() {\n/*                                                               \n\tfreopen(file\"in\", \"r\", stdin);\n\tfreopen(file\"out\", \"w\", stdout);\n*/                  \n\tscanf(\"%d\", &n);    \n\tforn(i, 1, n) {               \n\t\tscanf(\"%d\", &a[i]);\n\t}\n\n\tforn(i, 1, n) {\n\t\t++cnt[a[i]];\n\t\tif (cnt[a[i]] == 4) {\n\t\t\tAdd_ans(a[i], a[i]);\n\t\t\tcontinue;\n\t\t}\n\t\tif (Left.find(a[i]) == Left.end())\n\t\t\tLeft[a[i]] = i;\n\t    else {    \n\t    \tadded = 0;\n\t    \tfor(;sz;) {\n\t    \t\tint l = st[sz].fr.fr, r = st[sz].fr.sec, val = st[sz].sec;\n\t    \t\tif (Left[a[i]] < l)\t{\n\t    \t\t\t--sz;\n\t    \t\t\tcontinue;\t\n\t    \t\t}      \n\t    \t\tif (l < Left[a[i]] && Left[a[i]] < r) {\n\t    \t\t\tAdd_ans(val, a[i]);\n\t    \t\t\tadded = 1;\n\t    \t\t}\t      \n\t    \t\tbreak;\n\t \t    }\n\t \t    if (!added)\n\t \t    \tst[++sz] = mp(mp(Left[a[i]], i), a[i]);\n\t    }    \n\t}\n       \n    printf(\"%d\\n\", ans);\n\tforn(i, 1, ans) {\n\t\tprintf(\"%d \", res[i]);\n\t}\n\treturn 0;      \t\n}\n                          "], "input": "", "output": "", "tags": ["data structures", "dp", "greedy"], "dificulty": "2300", "interactive": false}