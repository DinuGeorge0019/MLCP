{"link": "https://codeforces.com//contest/615/problem/B", "problemId": "45130", "problem_idx": "B", "shortId": "615B", "contest_number": "615", "problem_submissions": {"D": [15246218, 15243648, 15241674, 15242192, 15244574, 15242022, 15243833, 15247327, 15245928, 15245965, 15250600, 15244765, 15244668, 15243379, 15244617, 15245499, 15246279, 15242819], "C": [15243771, 15245552, 15245503, 15246881, 15242164, 15249238, 15422750, 15249506, 15244269, 15243604, 15243504, 15247689, 15243273, 15245397, 15244917, 15256203, 15256783, 15256658, 15262298], "E": [15241790, 15242394, 15249657, 15250007, 15248042, 15246416, 15250940, 15251751, 15248476, 15250193, 15254285, 15249151, 15249613, 15242059, 15248491, 15248349, 15250365], "B": [15240908, 15246431, 15240992, 15240867, 15249484, 15247141, 15245895, 15241449, 15250210, 15247251, 15242653, 15240727, 15240692, 15240772, 15241317, 15251939, 15241564, 15244142, 15246779], "A": [15238675, 15239335, 15238139, 15237976, 15238447, 15239307, 15239985, 15238131, 15248916, 15237777, 15240179, 15237788, 15238124, 15238812, 15238095, 15252529, 15238764, 15239416, 15239104]}, "name": "B. Longtail Hedgehog", "statement": "This Christmas Santa gave Masha a magic picture and a pencil. The\r\npicture consists of points connected by segments (they might cross in\r\nany way, that doesn\u2019t matter). No two segments connect the same pair of\r\npoints, and no segment connects the point to itself. Masha wants to\r\ncolor some segments in order paint a hedgehog. In Mashas mind every\r\nhedgehog consists of a tail and some spines. She wants to paint the tail\r\nthat satisfies the following conditions: Only segments already presented\r\non the picture can be painted; The tail should be continuous, i.e.\r\nconsists of some sequence of points, such that every two neighbouring\r\npoints are connected by a colored segment; The numbers of points from\r\nthe beginning of the tail to the end should strictly increase. Masha\r\ndefines the length of the tail as the number of points in it. Also, she\r\nwants to paint some spines. To do so, Masha will paint all the segments,\r\nsuch that one of their ends is the of the tail. Masha defines the beauty\r\nof a hedgehog as the length of the tail multiplied by the number of\r\nspines. Masha wants to color the most beautiful hedgehog. Help her\r\ncalculate what result she may hope to get.Note that according to Masha\u2019s\r\ndefinition of a hedgehog, one segment may simultaneously serve as a\r\nspine and a part of the tail (she is a little girl after all). Take a\r\nlook at the picture for further clarifications.\r\n", "solutions": ["#include <bits/stdc++.h>\nusing namespace std;\nint n, m, ro[4000005][2] = {{0}}, p[100005], u, v;\nint cnt[100005] = {0};\nlong long ans = 0, f[100005] = {0};\nint main()\n{\n\tcin >> n >> m;\n\tmemset(p, -1, sizeof(p));\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tscanf(\"%d%d\", &u, &v);\n\t\tro[i * 2 - 1][0] = v;\n\t\tro[i * 2 - 1][1] = p[u];\n\t\tp[u] = i * 2 - 1;\n\t\tro[i * 2][0] = u;\n\t\tro[i * 2][1] = p[v];\n\t\tp[v] = i * 2;\n\t\tcnt[u]++;\n\t\tcnt[v]++;\n\t}\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = p[i]; j != -1; j = ro[j][1])\n\t\t\tif (ro[j][0] < i)\n\t\t\t\tf[i] = max(f[i], f[ro[j][0]]);\n\t\tf[i]++;\n\t\tans = max(ans, f[i] * cnt[i]);\n\t}\n\tcout << ans << endl;\n}"], "input": "", "output": "", "tags": ["dp", "graphs"], "dificulty": "1600", "interactive": false}