{
    "link": "https://codeforces.com//contest/551/problem/D",
    "problemId": "29255",
    "problem_idx": "D",
    "shortId": "551D",
    "contest_number": "551",
    "problem_submissions": {
        "E": [
            11555073,
            11556189,
            11556267,
            12093920,
            12093908,
            12093899,
            12093877,
            11569219,
            12075099,
            11560541,
            11974261
        ],
        "C": [
            11550228,
            11551507,
            11551274,
            11549626,
            11554425,
            11552178,
            11551280,
            11551429,
            11550037,
            11552051,
            11552542,
            11553869,
            11554092,
            11551179,
            11554624,
            11555215,
            11554114,
            11556563
        ],
        "B": [
            11547200,
            11548697,
            11548210,
            11548298,
            11557853,
            11549187,
            11548320,
            11548758,
            11553975,
            11549363,
            11548545,
            11548081,
            11548144,
            11549688,
            11551583,
            11555068,
            11550330,
            11549557,
            11552446,
            11549314
        ],
        "A": [
            11546166,
            11546483,
            11546960,
            11546195,
            11546251,
            11547284,
            11546221,
            11546416,
            11546211,
            11546383,
            11546301,
            11546208,
            11546276,
            11546409,
            11547548,
            11546344,
            11547064,
            11546598,
            11546207,
            11546571
        ],
        "D": [
            11557988,
            11557349,
            11552518,
            11560739,
            11558020,
            11557476,
            11555146,
            11555685,
            11602898,
            11557308,
            11561475
        ]
    },
    "name": "D. GukiZ and Binary Operations",
    "statement": "We all know that GukiZ often plays with arrays. Now he is thinking about\r\nthis problem: how many arrays , of length , with non-negative elements\r\nthen meet the following condition: ? Here operation means bitwise AND\r\n(in it is equivalent to , in it is equivalent to ), operation means\r\nbitwise OR (in it is equivalent to , in it is equivalent to ). Because\r\nthe answer can be quite large, calculate it modulo . This time GukiZ\r\nhasn’t come up with solution, and needs you to help him!\r\n",
    "solutions": [
        "#include <bits/stdc++.h>\nusing namespace std;\n\nconst int S = 4;\nconst int OP[S][S] = {\n\t{ 1, 0, 1, 0 },\n\t{ 0, 1, 0, 1 },\n\t{ 1, 0, 0, 1 },\n\t{ 0, 1, 0, 1 }\n} ;\n\ntypedef long long LL;\n\nLL MOD;\nstruct Matrix {\n\tLL a[S][S];\n\n\tMatrix() { memset(a, 0, sizeof a); }\n\tvoid Unit(LL x = 1) {\n\t\tfor (int i = 0; i < S; ++i) {\n\t\t\tfor (int j = 0; j < S; ++j) {\n\t\t\t\ta[i][j] = 0;\n\t\t\t}\n\t\t\ta[i][i] = x % MOD;\n\t\t}\n\t}\n\tvoid ToOP() {\n\t\tfor (int i = 0; i < S; ++i) {\n\t\t\tfor (int j = 0; j < S; ++j) {\n\t\t\t\ta[i][j] = OP[i][j] % MOD;\n\t\t\t}\n\t\t}\n\t}\n} ;\n\nMatrix operator * (const Matrix &a, const Matrix &b) {\n\tMatrix s;\n\n\tfor (int i = 0; i < S; ++i) {\n\t\tfor (int k = 0; k < S; ++k) {\n\t\t\tif (a.a[i][k] == 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (int j = 0; j < S; ++j) {\n\t\t\t\ts.a[i][j] += a.a[i][k] * b.a[k][j];\n\t\t\t\ts.a[i][j] %= MOD;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn s;\n}\n\nMatrix operator ^ (Matrix a, LL p) {\n\tMatrix s;\n\n\ts.Unit();\n\twhile (p > 0) {\n\t\tif (p & 1) {\n\t\t\ts = s * a;\n\t\t}\n\t\ta = a * a;\n\t\tp >>= 1;\n\t}\n\n\treturn s;\n}\n\nint main() {\n\tLL n, k, l, m;\n\n\twhile (cin >> n >> k >> l >> m) {\n\t\tMOD = m;\n\t\tif (n == 1) {\n\t\t\tcout << (1 % MOD) << endl;\n\t\t\tcontinue;\n\t\t}\n\t\tMatrix base, op;\n\t\tLL a0, a1;\n\n\t\tbase.a[0][0] = base.a[0][2] = 1 % MOD;\n\t\top.ToOP();\n\t\tbase = base * (op ^ (n - 1));\n\n\t\ta0 = (base.a[0][0] + base.a[0][2]) % MOD;\n\t\ta1 = (base.a[0][1] + base.a[0][3]) % MOD;\n\t\t//cout << a0 << ' ' << a1 << endl;\n\n\t\tLL answer = 1 % MOD;\n\n\t\tfor (int i = 0; i < l; ++i) {\n\t\t\tif (k & 1) {\n\t\t\t\tanswer *= a1;\n\t\t\t} else {\n\t\t\t\tanswer *= a0;\n\t\t\t}\n\t\t\tanswer %= MOD;\n\t\t\tk >>= 1;\n\t\t}\n\t\tif (k) {\n\t\t\tcout << 0 << endl;\n\t\t} else {\n\t\t\tcout << answer << endl;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n"
    ],
    "input": "",
    "output": "",
    "tags": [
        "combinatorics",
        "implementation",
        "math",
        "matrices",
        "number theory"
    ],
    "dificulty": "2100",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV2\\D. GukiZ and Binary Operations.json",
    "editorial_link": "https://codeforces.com/blog/entry/18508",
    "editorial": "Here is my code: 11604669 Iâm getting WA on 10th test case 1000000001\r\n1000000002 37 1000000007 Output: 187032448 Answer: 472514342 Can someone\r\ngive me an idea where Iâm wrong? Thanks in advance\r\n",
    "hint": []
}