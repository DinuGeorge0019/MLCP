{"link": "https://codeforces.com//contest/534/problem/D", "problemId": "25993", "problem_idx": "D", "shortId": "534D", "contest_number": "534", "problem_submissions": {"E": [10683933, 10683934], "D": [10678175, 10678621, 10677106, 10675536, 10676106, 10674810, 10677903, 10677747, 10679006, 10677924, 10680207, 10678552, 10679589, 10680738, 10678781, 10678817, 10680761], "C": [10671852, 10674805, 10673233, 10673070, 10671645, 10677139, 10673078, 10674877, 10676809, 10674952, 10672887, 10676606, 10670002, 10674948, 10676024, 10676008, 10674748], "B": [10669948, 10673036, 10671795, 10670663, 10670379, 10671586, 10670885, 10672541, 10673957, 10673051, 10670344, 10673862, 10674029, 10669586, 10673422, 10671966, 10672486], "A": [10669180, 10670286, 10669409, 10669242, 10669361, 10670184, 10669504, 10669859, 10671143, 10670792, 10669355, 10669710, 10671717, 10669137, 10670714, 10672627, 10669808], "F": [10688186, 10766570]}, "name": "D. Handshakes", "statement": "On February, 30th students came in the Center for Training Olympiad\r\nProgrammers (CTOP) of the Berland State University. They came one by\r\none, one after another. Each of them went in, and before sitting down at\r\nhis desk, greeted with those who were present in the room by shaking\r\nhands. Each of the students who came in stayed in CTOP until the end of\r\nthe day and never left.At any time any three students could join\r\ntogether and start participating in a team contest, which lasted until\r\nthe end of the day. The team did not distract from the contest for a\r\nminute, so when another student came in and greeted those who were\r\npresent, he did not shake hands with the members of the contest writing\r\nteam. Each team consisted of exactly three students, and each student\r\ncould not become a member of more than one team. Different teams could\r\nstart writing contest at different times.Given how many present people\r\nshook the hands of each student, get a possible order in which the\r\nstudents could have come to CTOP. If such an order does not exist, then\r\nprint that this is impossible.Please note that some students could work\r\nindependently until the end of the day, without participating in a team\r\ncontest.\r\n", "solutions": ["#include <bits/stdc++.h>\nusing namespace std;\n#define For(i,a,b) for(int i=a;i<b;i++)\n#define pb push_back\n#define mod 1000000007\n#define reset(s,val) memset(s,val,sizeof(s))\n#define eps 0.0000001\n#define pi acos(-1)\n#define sqr(x) (x)*(x)\n#define maxn 32000\n\nint n,val,cnt[200005];\nmap<int,stack<int> > dic;\nmultiset<int> s[3];\nvector<int> ans;\n\nint main( ){\n    //freopen(\"input.txt\",\"r\",stdin);\n    //freopen(\"output.txt\",\"w\",stdout);\n    cin>>n;\n    reset(cnt,0);\n    For(i,1,1+n)\n    {\n        cin>>val;\n        cnt[val]++;\n        dic[val].push(i);\n        s[val%3].insert(val);\n    }\n    val=-1;\n    //cout<<s[1].size()<<endl;\n    ans.clear();\n    For(i,0,n)\n    {\n        //cout<<i<<endl;\n        int ind=i%3;\n        val++;\n        if(s[ind].count(val))\n        {\n            ans.pb(dic[val].top());\n            dic[val].pop();\n            s[ind].erase(s[ind].find(val));\n        }\n        else\n        {\n            //cout<<s[ind].size()<<endl;\n            if(s[ind].size()==0||*(s[ind].begin())>val)\n            {\n                cout<<\"Impossible\";\n                return 0;\n            }\n            auto it=s[ind].lower_bound(val);\n            it--;\n            val=*(it);\n            ans.pb(dic[val].top());\n            dic[val].pop();\n            s[ind].erase(it);\n        }\n    }\n    cout<<\"Possible\"<<endl;\n    for(int i:ans) cout<<i<<' ';\n}\n"], "input": "", "output": "", "tags": ["binary search", "constructive algorithms", "data structures", "greedy"], "dificulty": "1900", "interactive": false}