{"link": "https://codeforces.com//contest/1659/problem/F", "problemId": "1371416", "problem_idx": "F", "shortId": "1659F", "contest_number": "1659", "problem_submissions": {"E": [153913573, 153929614, 153928927, 153922832, 153919141, 153972138, 153926923, 153927092, 153929319, 153932903, 153930192, 153930364, 153930632, 153931626, 153929090, 153932497, 153927674, 153932539, 153931108, 153930225], "D": [153912412, 153905719, 153910339, 153913081, 153925687, 153914747, 153914843, 153917030, 153914214, 153914225, 153916202, 153914923, 153911260, 153911942, 153919382, 153913809, 153916530, 153910597, 153914778, 153923066], "B": [153899189, 153895163, 153894044, 153901045, 153896660, 153905534, 153895509, 153894100, 153894393, 153894053, 153896780, 153900091, 153895296, 153893292, 153896323, 153897272, 153895755, 153896012, 153922971, 153892638], "C": [153893804, 153899081, 153898923, 153904670, 153899860, 153895491, 153906966, 153902317, 153904388, 153898598, 153905688, 153905657, 153901854, 153898683, 153904460, 153903103, 153900333, 153901824, 153895900, 153899518], "A": [153892134, 153890875, 153890881, 153898852, 153891639, 153899777, 153891702, 153891302, 153890852, 153890890, 153891590, 153893681, 153891282, 153890712, 153890944, 153892901, 153890725, 153890838, 153891604, 153890839], "F": [153937865]}, "name": "F. Tree and Permutation Game", "statement": "There is a tree of n vertices and a permutation p of size n. A token is\r\npresent on vertex x of the tree.Alice and Bob are playing a game. Alice\r\nis in control of the permutation p, and Bob is in control of the token\r\non the tree. In Alice\u2019s turn, she pick two u and v ( positions; u\r\nneq v), such that the token is neither at vertex u nor vertex v on the\r\ntree, and swap their positions in the permutation p. In Bob\u2019s turn, he\r\nmove the token to an adjacent vertex from the one it is currently\r\non.Alice wants to sort the permutation in increasing order. Bob wants to\r\nprevent that. Alice wins if the permutation is sorted in increasing\r\norder at the beginning or end of her turn. Bob wins if he can make the\r\ngame go on for an infinite number of moves (which means that Alice is\r\nnever able to get a sorted permutation). Both players play optimally.\r\nAlice makes the first move.Given the tree, the permutation p, and the\r\nvertex x on which the token initially is, find the winner of the game.\r\n", "solutions": ["#include<bits/stdc++.h>\n\n#define X first\n#define Y second\n#define MP make_pair\n#define PB push_back\n#define ll long long\n\nusing namespace std;\n\nll t,n,k;\nll prov;\nll koji;\nll niz[200005];\nll di;\nll a,b;\nll nes;\nll gdje[200005];\nll br;\n\nint main () {\n\t\n\tios_base::sync_with_stdio(false);\n\tcin.tie(0);\n\t\n\tcin>>t;\n\twhile(t--){\n\t\tcin>>n>>k;\n\t\tkoji=-1;\n\t\tprov=0;\n\t\tdi=0;\n\t\tbr=0;\n\t\t//memset(niz,0,sizeof(niz));\n\t\tfor(int i=0; i<n-1; i++){\n\t\t\tcin>>a>>b;\n\t\t\tniz[a]++;\n\t\t\tniz[b]++;\n\t\t}\n\t\tfor(int i=1; i<=n; i++){\n\t\t\tif(niz[i]==n-1){\n\t\t\t\tkoji=i;\n\t\t\t}\n\t\t}\n\t\tif(koji==-1 && prov==0){\n\t\t\tcout<<\"Alice\\n\";\n\t\t\tprov=1;\n\t\t}\n\t\tfor(int i=1; i<=n; i++){\n\t\t\tcin>>niz[i];\n\t\t\tgdje[niz[i]]=i;\n\t\t\tif(niz[i]==koji){\n\t\t\t\tdi=i;\n\t\t\t}\n\t\t}\n\t\t//cout<<koji<<\" \"<<t<<\"\\n\";\n\t\tif(di!=koji && (k==koji || k==niz[koji]) && prov==0){\n\t\t\tcout<<\"Bob\\n\";\n\t\t\tprov=1;\n\t\t}\n\t\tnes=0;\n\t\tfor(int i=1; i<=n; i++){\n\t\t\tif(niz[i]==i){\n\t\t\t\tnes++;\n\t\t\t}\n\t\t}\n\t\tif(nes==n && prov==0){\n\t\t\tcout<<\"Alice\\n\";\n\t\t\tprov=1;\n\t\t}\n\t\tif(di!=koji){\n\t\t\tgdje[niz[koji]]=di;\n\t\t\tgdje[niz[di]]=koji;\n\t\t\tswap(niz[koji],niz[di]);\n\t\t\tk=koji;\n\t\t}\n\t\tbr=0;\n\t\tfor(int i=1; i<=n; i++){\n\t\t\tif(niz[i]!=i){\n\t\t\t\tbr++;\n\t\t\t\ta=i;\n\t\t\t\tb=niz[i];\n\t\t\t\tgdje[niz[i]]=gdje[i];\n\t\t\t\tswap(niz[i],niz[gdje[i]]);\n\t\t\t\tgdje[i]=i;\n\t\t\t}\n\t\t}\n\t\tif(prov==0){\n\t\t\tif(br==0){\n\t\t\t\tcout<<\"Alice\\n\";\n\t\t\t}\n\t\t\telse if(k==koji){\n\t\t\t\tif(br%2==1){\n\t\t\t\t\tcout<<\"Alice\\n\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<\"Bob\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(br==1 && k!=a && k!=b){\n\t\t\t\t\tcout<<\"Alice\\n\";\n\t\t\t\t}\n\t\t\t\telse if(br%2==1){\n\t\t\t\t\tcout<<\"Bob\\n\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcout<<\"Alice\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tprov=1;\n\t\t}\n\t\tfor(int i=0; i<=n; i++){\n\t\t\tniz[i]=0;\n\t\t}\n\t\tfor(int i=0; i<=n; i++){\n\t\t\tgdje[i]=0;\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n"], "input": "", "output": "", "tags": ["dfs and similar", "games", "graphs", "trees"], "dificulty": "3000", "interactive": false}