{"link": "https://codeforces.com//contest/1474/problem/D", "problemId": "870483", "problem_idx": "D", "shortId": "1474D", "contest_number": "1474", "problem_submissions": {"E": [104828368, 104825250, 104827801, 104822469, 104822968, 104825131, 104832974, 104811012, 104834815, 104836057, 104786622, 104834179, 104835602, 104835107, 104819950, 104895130, 104882601, 104882491, 104822858], "D": [104803255, 104806609, 104803024, 104811001, 104809350, 104807802, 104813937, 104829181, 104824996, 104821358, 104809387, 104820702, 104821421, 104825040, 104833883, 104796190, 104794553, 104806036, 104805452, 104811623], "C": [104789142, 104791190, 104786189, 104802722, 104796149, 104800127, 104797483, 104805966, 104792346, 104794052, 104822570, 104797300, 104791406, 104805588, 104813805, 104788832, 104801037, 104795624, 104794599, 104838458], "B": [104775373, 104776212, 104776559, 104780629, 104776012, 104787737, 104785829, 104784413, 104779863, 104778330, 104827451, 104777621, 104780062, 104783179, 104774681, 104778495, 104779543, 104781042, 104777052, 104790738], "A": [104773322, 104773959, 104773453, 104773717, 104779601, 104775931, 104776918, 104778778, 104773943, 104773918, 104829555, 104773504, 104773695, 104774435, 104774622, 104773540, 104774168, 104774408, 104773478, 104781204]}, "name": "D. Cleaning", "statement": "During cleaning the coast, Alice found n piles of stones. The i-th pile\r\nhas a_i stones.Piles i and i + 1 are neighbouring for all 1\r\nleq i\r\nleq n - 1. If pile i becomes empty, piles i - 1 and i + 1 become\r\nneighbouring.Alice is too lazy to remove these stones, so she asked you\r\nto take this duty. She allowed you to do only the following operation:\r\nSelect two piles and, if both of them are not empty, remove one stone\r\nfrom each of them. Alice understands that sometimes it\u2019s impossible to\r\nremove all stones with the given operation, so she allowed you to use\r\nthe following superability: Before the start of cleaning, you can select\r\ntwo piles and swap them. Determine, if it is possible to remove all\r\nstones using the superability .\r\n", "solutions": ["#include<bits/stdc++.h>\nusing namespace std;\nlong long N = 1000000000000000;\nvoid solve(){\n\tlong long n,i,f=1,l=0,ff=1;\n\tcin>>n;\n\tlong long a[n],p[n],o[n],e[n];\n\tfor(i=0;i<n;i++){\n\t\tcin>>a[i];\n\t}\n\tif(n==1){\n\t\tcout<<\"NO\"<<endl;\n\t\treturn;\n\t}\n\tfor(i=0;i<n;i++){\n\t\tlong long r=a[i]-l;\n\t\tif(i==0){\n\t\t\tp[i]=r;\n\t\t}\n\t\telse{\n\t\t\tp[i]=min(p[i-1],r);\n\t\t}\n\t\tif(r<0){\n\t\t\tf=0;\n\t\t}\n\t\tswap(l,r);\n\t}\n\tif(l!=0){\n\t\tf=0;\n\t}\n\tif(f){\n\t\tcout<<\"YES\"<<endl;\n\t\treturn;\n\t}\n\te[0]=a[0];o[0]=0;e[1]=a[0];o[1]=a[1];\n\tfor(i=2;i<n;i++){\n\t\te[i]=e[i-1];o[i]=o[i-1];\n\t\tif(i%2==0){\n\t\t\te[i]=e[i]+a[i];\n\t\t}\n\t\telse{\n\t\t\to[i]=o[i]+a[i];\n\t\t}\n\t}\n\tlong long se[n],so[n];\n\tfor(i=n-1;i>=0;--i){\n\t\tif(i%2==1){\n\t\t\tif(i==n-1 || i==n-2){\n\t\t\t\tso[i]=o[i]-e[i];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tso[i]=min(o[i]-e[i],so[i+2]);\n\t\t\t}\n\t\t\tif(i==n-1){\n\t\t\t\tse[i]=N;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tse[i]=se[i+1];\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(i==n-1 || i==n-2){\n\t\t\t\tse[i]=e[i]-o[i];\n\t\t\t}\n\t\t\telse{\n\t\t\t\tse[i]=min(e[i]-o[i],se[i+2]);\n\t\t\t}\n\t\t\tif(i==n-1){\n\t\t\t\tso[i]=N;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tso[i]=so[i+1];\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=1;i<n;i++){\n\t\tff=1;\n\t\tif(i!=1 && p[i-2]<0){\n\t\t\tff=0;\n\t\t}\n\t\tif(i%2==1){\n\t\t\tif(se[i]+2*(a[i]-a[i-1])<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(so[i]+2*(a[i-1]-a[i])<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(e[i-1]-o[i-1]+a[i]-a[i-1]<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(n%2==0){\n\t\t\t\tif(o[n-1]-e[n-1]+2*(a[i-1]-a[i])!=0){\n\t\t\t\t\tff=0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(e[n-1]-o[n-1]+2*(a[i]-a[i-1])!=0){\n\t\t\t\t\tff=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(se[i]+2*(a[i-1]-a[i])<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(so[i]+2*(a[i]-a[i-1])<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(o[i-1]-e[i-1]+a[i]-a[i-1]<0){\n\t\t\t\tff=0;\n\t\t\t}\n\t\t\tif(n%2==0){\n\t\t\t\tif(o[n-1]-e[n-1]+2*(a[i]-a[i-1])!=0){\n\t\t\t\t\tff=0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(e[n-1]-o[n-1]+2*(a[i-1]-a[i])!=0){\n\t\t\t\t\tff=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ff){\n\t\t\tf=1;\n\t\t}\n\t}\n\tif(f){\n\t\tcout<<\"YES\";\n\t}\n\telse{\n\t\tcout<<\"NO\";\n\t}\n\tcout<<endl;\n}\nint main(){\n\tios_base::sync_with_stdio(0);\n\tcin.tie(NULL);\n\tcout.tie(NULL);\n\tlong long t=1;\n\tcin>>t;\n\twhile(t--){\n\t\tsolve();\n\t}\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["data structures", "dp", "greedy", "math"], "dificulty": "2200", "interactive": false}