{"link": "https://codeforces.com//contest/1594/problem/D", "problemId": "1135637", "problem_idx": "D", "shortId": "1594D", "contest_number": "1594", "problem_submissions": {"E2": [131201431, 131189862, 131190731, 131204830, 131335383, 131226398, 131198152, 131201638, 131204894, 131232694, 131217147, 131214481, 131205202, 131197222, 131203076, 131208236, 131224943, 131226297, 131228207, 131205596], "F": [131193546, 131198168, 131204819, 131191276, 131194027, 131211385, 131209381, 131214118, 131206895, 131201547, 131217018, 131226069, 131219283, 131221051, 131209964, 131207271, 131214277, 131238575, 131228401, 131201592], "E1": [131181296, 131181310, 131181914, 131185896, 131188245, 131188013, 131187848, 131190323, 131191597, 131193172, 131188008, 131187198, 131191256, 131191508, 131193161, 131216105, 131192871, 131192806, 131193863], "C": [131178489, 131175224, 131175277, 131176811, 131175035, 131178056, 131178928, 131176905, 131179134, 131182174, 131176234, 131176202, 131182167, 131177472, 131233310, 131183523, 131183173, 131182656, 131183921, 131177712], "D": [131177404, 131179044, 131177912, 131183480, 131185907, 131184631, 131184408, 131188052, 131189056, 131189293, 131184453, 131184011, 131187702, 131188002, 131190262, 131189525, 131200165, 131190411, 131188282], "A": [131171410, 131170689, 131170400, 131171742, 131170602, 131170026, 131170772, 131172659, 131172422, 131172236, 131170874, 131170513, 131172774, 131170479, 131173618, 131170466, 131175176, 131176321, 131170181], "B": [131170592, 131172208, 131170486, 131173477, 131172222, 131172615, 131174348, 131174291, 131175520, 131179615, 131172910, 131172727, 131175758, 131172405, 131179739, 131172566, 131179352, 131177990, 131173135]}, "name": "D. The Number of Imposters", "statement": "Theofanis started playing the new online game called \"Among them\".\r\nHowever, he always plays with Cypriot players, and they all have the\r\nsame name: \"Andreas\" (the most common name in Cyprus).In each game,\r\nTheofanis plays with n other players. Since they all have the same name,\r\nthey are numbered from 1 to n.The players write m comments in the chat.\r\nA comment has the structure of \"i j c\" where i and j are two distinct\r\nintegers and c is a string (1\r\nle i, j\r\nle n; i\r\nneq j; c is either or ). The comment means that player i said that\r\nplayer j has the role c.An imposter always lies, and a crewmate always\r\ntells the truth. Help Theofanis find the maximum possible number of\r\nimposters among all the other Cypriot players, or determine that the\r\ncomments contradict each other (see the notes for further\r\nexplanation).Note that each player has exactly role: either or .\r\n", "solutions": ["#include <bits/stdc++.h>\nusing namespace std;\nint fa[500005],vis[500005],sz[500005];\ninline int ff(int x)\n{\n\tif(fa[x]==x) return x;\n\treturn fa[x]=ff(fa[x]);\n}\nint n;\ninline void merge(int x,int y)\n{\n\tx=ff(x),y=ff(y);\n\tif(x==y) return ;\n\tsz[x]+=sz[y],fa[y]=x;\n}\nsigned main(int argc, char** argv) {\n\tint T;\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcin >> T;\n\twhile(T--)\n\t{\n\t\tint n,m;\n\t\tcin >> n >> m;\n\t\tfor(int i=1;i<=n+n;i++) fa[i]=i,vis[i]=0;\n\t\tfor(int i=1;i<=n;i++) sz[i]=1;\n\t\tfor(int i=n+1;i<=n+n;i++) sz[i]=0;\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tint x,y;\n\t\t\tstring k;\n\t\t\tcin >> x >> y >> k;\n\t\t\tif(k[0]=='c')\n\t\t\t{\n\t\t\t\tmerge(x,y);\n\t\t\t\tmerge(x+n,y+n);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmerge(x+n,y);\n\t\t\t\tmerge(x,y+n);\n\t\t\t}\n\t\t}\n\t\tint ans=0;\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(ff(i)==ff(i+n))\n\t\t\t{\n\t\t\t\tans=-1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(vis[ff(i)]||fa[i]!=i) continue;\n\t\t\tans+=max(sz[ff(i)],sz[ff(i+n)]);\n\t\t\tvis[ff(i)]=1,vis[ff(i+n)]=1;\n\t\t}\n\t\tcout << ans << \"\\n\"; \n\t}\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["constructive algorithms", "dfs and similar", "dp", "dsu", "graphs"], "dificulty": "1700", "interactive": false}