{"link": "https://codeforces.com//contest/1536/problem/F", "problemId": "1007474", "problem_idx": "F", "shortId": "1536F", "contest_number": "1536", "problem_submissions": {"E": [118631124, 118614939, 118616967, 118624386, 118627719, 118635620, 118636863, 118621534, 118623141, 118619496, 118630371, 118626916, 118634340, 118635235, 118626014, 118625912, 118631232, 118724771, 118637508, 118632134, 118634841], "F": [118625791, 118638866, 118613437, 118637695, 118644936, 118650446, 118647459, 118663966, 118711352, 118653882, 118654218, 118882357], "C": [118608971, 118600883, 118628209, 118608554, 118608052, 118619465, 118622898, 118607847, 118602584, 118598176, 118609484, 118609006, 118618271, 118606277, 118606392, 118620701, 118612692, 118724743, 118612675, 118612583, 118612872], "D": [118608031, 118607288, 118623947, 118617513, 118619773, 118632284, 118632215, 118614859, 118617552, 118601113, 118616452, 118622152, 118614133, 118620886, 118617343, 118616486, 118624441, 118724752, 118620219, 118627264, 118625159], "B": [118602956, 118599083, 118634218, 118612957, 118602526, 118613641, 118606813, 118602130, 118599340, 118630482, 118605942, 118604400, 118601413, 118601634, 118600081, 118601184, 118602824, 118724734, 118602945, 118605239, 118604772], "A": [118598232, 118597991, 118635775, 118598107, 118598184, 118601999, 118598235, 118599189, 118598143, 118622748, 118598451, 118598128, 118598114, 118598284, 118598026, 118597979, 118598563, 118724715, 118598620, 118599178, 118598920]}, "name": "F. Omkar and Akmar", "statement": "Omkar and Akmar are playing a game on a circular board with n (2\r\nleq n\r\nleq 10^6) cells. The cells are numbered from 1 to n so that for each i\r\n(1\r\nleq i\r\nleq n-1) cell i is adjacent to cell i+1 and cell 1 is adjacent to cell\r\nn. Initially, each cell is empty.Omkar and Akmar take turns placing\r\neither an A or a B on the board, with Akmar going first. The letter must\r\nbe placed on an empty cell. In addition, the letter cannot be placed\r\nadjacent to a cell containing the same letter. A player loses when it is\r\ntheir turn and there are no more valid moves.Output the number of\r\npossible distinct games where both players play optimally modulo 10^9+7.\r\nNote that we only consider games where some player has lost and there\r\nare no more valid moves.Two games are considered distinct if the number\r\nof turns is different or for some turn, the letter or cell number that\r\nthe letter is placed on were different.A move is considered optimal if\r\nthe move maximizes the player\u2019s chance of winning, assuming the other\r\nplayer plays optimally as well. More formally, if the player who has to\r\nmove has a winning strategy, they have to make a move after which they\r\nwill still have a winning strategy. If they do not, they can make any\r\nmove.\r\n", "solutions": ["#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=1e6+5,mod=1e9+7;\nll n,ans,jc[N],jv[N];\nint read()\n{\n\tint res=0,fl=0; char a=getchar();\n\twhile(a<'0'||a>'9') fl|=a=='-',a=getchar();\n\twhile(a>='0'&&a<='9') res=res*10+a-'0',a=getchar();\n\treturn fl? -res:res;\n}\nll ksm(ll di,ll mi) {ll res=1; for(;mi;mi>>=1,di=di*di%mod) if(mi&1) res=res*di%mod; return res;}\nll c(ll a,ll b) {return a>=b? jc[a]*jv[b]%mod*jv[a-b]%mod:0;}\nint main()\n{\n\tint i,j;\n\tn=read();\n\tfor(jc[0]=i=1;i<=n;i++) jc[i]=jc[i-1]*i%mod;\n\tfor(jv[n]=ksm(jc[n],mod-2),i=n-1;~i;i--) jv[i]=jv[i+1]*(i+1)%mod;\n\tfor(i=0;i<=n-i;i++) if((n-1-i)&1) ans=(ans+c(n-i,i)*jc[n-i-1])%mod;\n\tcout<<ans*2*n%mod;\n\treturn 0;\n}"], "input": "", "output": "", "tags": ["chinese remainder theorem", "combinatorics", "constructive algorithms", "fft", "games", "geometry", "math", "meet-in-the-middle", "string suffix structures"], "dificulty": "2600", "interactive": false}