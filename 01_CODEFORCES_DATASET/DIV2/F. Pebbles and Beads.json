{"link": "https://codeforces.com//contest/1735/problem/F", "problemId": "1564420", "problem_idx": "F", "shortId": "1735F", "contest_number": "1735", "problem_submissions": {"B": [177889662, 177889589, 174382271, 174383359, 174378958, 174381714, 174380678, 174381284, 174379449, 174381236, 174383409, 174380794, 174386997, 174380696, 174383029, 174388681, 174388918, 174381361, 174381492, 174380657], "C": [177889461, 174387237, 174388475, 174385426, 174386634, 174386940, 174388812, 174387047, 174386729, 174389951, 174392206, 174395309, 174395650, 174392066, 174399201, 174396076, 174396038, 174408989, 174396383], "D": [177889264, 177889136, 174395610, 174396308, 174396251, 174394725, 174402042, 174395692, 174394285, 174419012, 174399212, 175815897, 174399788, 174408325, 174404931, 174401396, 174409441, 174402400, 174412649, 174401383, 174405540], "E": [177889081, 174408134, 174405644, 174412472, 174412292, 174413019, 174414458, 174417521, 174411011, 174419212, 175815464, 174463147, 174421324, 174420863, 174423975, 174427537, 174420606, 174423899, 174420778, 174422936, 174422611], "F": [177888879, 174528121, 174463614, 174586382], "A": [177888485, 174377614, 174378788, 174377462, 174377792, 174377956, 174378462, 174377717, 174377806, 174378861, 174382247, 174379109, 174377781, 174377528, 174379924, 174379851, 174378283, 174383584, 174377997]}, "name": "F. Pebbles and Beads", "statement": "There are two currencies: pebbles and beads. Initially you have a\r\npebbles, b beads.There are n days, each day you can exchange one\r\ncurrency for another at some exchange rate.On day i, you can exchange\r\n-p_i\r\nleq x\r\nleq p_i pebbles for -q_i\r\nleq y\r\nleq q_i beads or vice versa. It\u2019s allowed not to perform an exchange at\r\nall. Meanwhile, if you perform an exchange, the proportion x\r\ncdot q_i = -y\r\ncdot p_i must be fulfilled. Fractional exchanges are allowed.You can\r\nperform no more than one such exchange in one day. The numbers of\r\npebbles and beads you have must always remain non-negative.Please solve\r\nthe following n problems independently: for each day i, output the\r\nmaximum number of pebbles that you can have at the end of day i if you\r\nperform exchanges optimally.\r\n", "solutions": ["// LUOGU_RID: 91546812\n//author: HugeWide\n/*rating:\nCodeforces: 2307,International Master\nAtcoder: 1990,1Dan\nLuogu: 312=100+52+0+100+60\n*/\n#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\ntypedef long double db;\n\ninline ll read() {\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9') {\n\t\tif(ch=='-') f=-f;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9') {\n\t\tx=(x<<3)+(x<<1)+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\ninline void write(ll x) {\n\tif(x<0) putchar('-'),x=-x;\n\tif(x>=10) write(x/10);\n\tputchar(x%10+'0');\n}\n#define writesp(x) write(x),putchar(' ')\n#define writeln(x) write(x),putchar('\\n')\n\n#define rep(x,l,r) for(int x=l;x<=r;x++)\n#define per(x,r,l) for(int x=r;x>=l;x--)\n#define pb push_back\n#define mp make_pair\n#define all(v) v.begin(),v.end()\n\nconst int N=300300;\n\nint n;\ndb a,b;\ndb p[N],q[N];\n\nstruct Vector {\n\tdb x,y;\n\tVector(db _x,db _y) {\n\t\tx=_x,y=_y;\n\t}\n\tbool operator < (const Vector& a) const {\n\t\treturn y*a.x>x*a.y;\n\t}\n};\nmultiset<Vector> s;\ntypedef multiset<Vector>::iterator si;\n\ndb lx,ly,rx,ry;\nvoid solve() {\n\tn=read(),a=read(),b=read();\n\trep(i,1,n) p[i]=read();\n\trep(i,1,n) q[i]=read();\n\ts.clear(); lx=rx=a,ly=ry=b;\n\trep(i,1,n) {\n\t\ts.insert(Vector(p[i]*2,q[i]*2));\n\t\tlx-=p[i],ly+=q[i],rx+=p[i],ry-=q[i];\n\t\twhile(ry<0) {\n\t\t\tsi it=s.begin();\n\t\t\tdb x=it->x,y=it->y;\n\t\t\ts.erase(it);\n\t\t\tif(ry+y<=0) {\n\t\t\t\trx-=x,ry+=y;\n\t\t\t} else {\n\t\t\t\trx-=x,ry+=y;\n\t\t\t\tdb t=ry/y;\n\t\t\t\tx*=t,y*=t;\n\t\t\t\trx+=x,ry-=y;\n\t\t\t\ts.insert(Vector(x,y));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\twhile(lx<0) {\n\t\t\tsi it=s.end(); it--;\n\t\t\tdb x=it->x,y=it->y;\n\t\t\ts.erase(it);\n\t\t\tif(lx+x<=0) {\n\t\t\t\tlx+=x,ly-=y;\n\t\t\t} else {\n\t\t\t\tlx+=x,ly-=y;\n\t\t\t\tdb t=lx/x;\n\t\t\t\tx*=t,y*=t;\n\t\t\t\tlx-=x,ly+=y;\n\t\t\t\ts.insert(Vector(x,y));\n\t\t\t}\n\t\t}\n//\t\tdb x=rx,y=ry;\n//\t\tprintf(\"(%.0lf,%.0lf) \",x,y);\n//\t\tfor(si it=s.begin();it!=s.end();it++) {\n//\t\t\tx-=it->x,y+=it->y;\n//\t\t\tprintf(\"(%.0lf,%.0lf) \",x,y);\n//\t\t}\n//\t\tprintf(\"\\n\");\n\t\tdouble ans=rx;\n\t\tprintf(\"%.12lf\\n\",ans);\n\t}\n}\n\nint main() {\n\tint t=read(); while(t--) solve();\n\treturn 0;\n}\n"], "input": "", "output": "", "tags": ["data structures", "geometry"], "dificulty": "2900", "interactive": false}