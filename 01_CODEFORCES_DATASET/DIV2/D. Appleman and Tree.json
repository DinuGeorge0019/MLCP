{
    "link": "https://codeforces.com//contest/462/problem/D",
    "problemId": "13278",
    "problem_idx": "D",
    "shortId": "462D",
    "contest_number": "462",
    "problem_submissions": {
        "E": [
            7594261,
            7594537,
            7595329,
            7596263,
            7601568,
            7614755,
            7600139
        ],
        "D": [
            7587651,
            7592446,
            7593867,
            9735296,
            7591253,
            7591277,
            7590693,
            7593546,
            7595882,
            7588189,
            7590576,
            7594402
        ],
        "C": [
            7584650,
            7583622,
            7585970,
            7584580,
            7589189,
            7588238,
            7586119,
            7587122,
            7584030,
            7587692,
            7584278,
            7582519,
            7583178,
            7592841,
            7585619,
            7586022,
            7585539,
            7584913
        ],
        "B": [
            7582226,
            7582283,
            7585916,
            7581332,
            7597800,
            7584599,
            7589421,
            7583929,
            7584799,
            7581360,
            7581775,
            7584268,
            7581390,
            7583901,
            7581652,
            7589229,
            7583119,
            7583099
        ],
        "A": [
            7580498,
            7581131,
            7581040,
            7580428,
            7581889,
            7585911,
            7581699,
            7582020,
            7580434,
            7580645,
            7580474,
            7580598,
            7580445,
            7581189,
            7580430,
            7582430,
            7580924,
            7581116
        ]
    },
    "name": "D. Appleman and Tree",
    "statement": "Appleman has a tree with vertices. Some of the vertices (at least one)\r\nare colored black and other vertices are colored white.Consider a set\r\nconsisting of edges of Applemanâ€™s tree. If Appleman deletes these edges\r\nfrom the tree, then it will split into parts. Note, that each part will\r\nbe a tree with colored vertices.Now Appleman wonders, what is the number\r\nof sets splitting the tree in such a way that each resulting part will\r\nhave exactly one black vertex? Find this number modulo ().\r\n",
    "solutions": [
        "#include <cstdio>\n#include <vector>\n#ifdef _WIN32\n#define LLFORMAT \"%I64\"\n#else\n#define LLFORMAT \"%ll\"\n#endif\nconst int MAXN=100005;\nconst int MOD=1000000007;\nint n;\nstd::vector<int> sons[MAXN];\nint col[MAXN];\nint f[MAXN];\nint g[MAXN];\nvoid init()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<n;++i)\n\t{\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\tsons[x].push_back(i);\n\t}\n\tfor (int i=0;i<n;++i) scanf(\"%d\",&col[i]);\n}\nvoid solve()\n{\n\tstatic int pres[MAXN];\n\tstatic int sufs[MAXN];\n\tfor (int i=n-1;i>=0;--i)\n\t{\n\t\tint m=sons[i].size();\n\t\tpres[0]=1;\n\t\tfor (int j=0;j<m;++j)\n\t\t\tpres[j+1]=(long long)pres[j]*f[sons[i][j]]%MOD;\n\t\tsufs[m]=1;\n\t\tfor (int j=m-1;j>=0;--j)\n\t\t\tsufs[j]=(long long)sufs[j+1]*f[sons[i][j]]%MOD;\n\t\tf[i]=pres[m];\n\t\tfor (int j=0;j<m;++j)\n\t\t\tg[i]=(g[i]+(long long)pres[j]*g[sons[i][j]]%MOD*sufs[j+1])%MOD;\n\t\tif (col[i])\n\t\t{\n\t\t\tg[i]=f[i];f[i]=0;\n\t\t}\n\t\tf[i]=(f[i]+g[i])%MOD;\n\t}\n\tprintf(\"%d\\n\",g[0]);\n}\nint main()\n{\n#ifndef ONLINE_JUDGE\n\tfreopen(\"D.in\",\"r\",stdin);\n\tfreopen(\"D.out\",\"w\",stdout);\n#endif\n\tinit();\n\tsolve();\n#ifndef ONLINE_JUDGE\n\tfclose(stdin);fclose(stdout);\n#endif\n\treturn 0;\n}\n"
    ],
    "input": "",
    "output": "",
    "tags": [
        "dp",
        "graphs"
    ],
    "dificulty": "2000",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV2\\D. Appleman and Tree.json",
    "editorial_link": "https://codeforces.com/blog/entry/13568",
    "editorial": "Fill a DP table such as the following bottom-up:\n\nDP[v][0] = the number of ways that the subtree rooted at vertex v has no black vertex.\nDP[v][1] = the number of ways that the subtree rooted at vertex v has one black vertex.\nThe recursion pseudo code is folloing:\n\nDFS(v):\n DP[v][0] = 1\n DP[v][1] = 0\n foreach u : the children of vertex v\n  DFS(u)\n  DP[v][1] *= DP[u][0]\n  DP[v][1] += DP[v][0]*DP[u][1]\n  DP[v][0] *= DP[u][0]\n if x[v] == 1:\n  DP[v][1] = DP[v][0]\n else:\n  DP[v][0] += DP[v][1]\nThe answer is DP[root][1].\n\nUPD:\nThe above code calculate the DP table while regarding that the vertex v is white (x[v]==0) in the foreach loop.\n\nAfter that the code thinks about the color of vertex v and whether we cut the edge connecting vertex v and its parent or not in \"if x[v] == 1: DP[v][1] = DP[v][0] else: DP[v][0] += DP[v][1]\".",
    "hint": []
}