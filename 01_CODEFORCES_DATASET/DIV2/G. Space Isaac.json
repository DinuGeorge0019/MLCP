{"link": "https://codeforces.com//contest/1046/problem/G", "problemId": "223479", "problem_idx": "G", "shortId": "1046G", "contest_number": "1046", "problem_submissions": {"B": [43252358, 43255928], "A": [43250309, 43254410, 43250987], "H": [43247639, 43245779, 43247215, 43247770], "F": [43246486, 43244046, 43246380, 43248077], "C": [43245566, 43247893, 43247771, 43244424, 43243585], "I": [43253744, 43258105, 43258173], "G": [43269050], "D": [], "E": []}, "name": "G. Space Isaac", "statement": "Everybody seems to think that the Martians are green, but it turns out\r\nthey are metallic pink and fat. Ajs has two bags of distinct nonnegative\r\nintegers. The bags are disjoint, and the union of the sets of numbers in\r\nthe bags is\r\n{0,1, ,M-1\r\n}, for some positive integer M. Ajs draws a number from the first bag\r\nand a number from the second bag, and then sums them modulo M.What are\r\nthe residues modulo M that Ajs cannot obtain with this action?\r\n", "solutions": ["#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef long double ldbl;\ntypedef pair<int, int> pii;\ntypedef pair<unsigned, unsigned> puu;\ntypedef pair<ll, ll> pll;\ntypedef pair<ull, ull> pull;\ntypedef vector<int> vi;\ntypedef vector<unsigned> vu;\ntypedef vector<ll> vll;\ntypedef vector<ull> vull;\ntypedef vector<pii> vpii;\ntypedef vector<puu> vpuu;\ntypedef vector<pll> vpll;\ntypedef vector<pull> vpull;\ntypedef vector<string> vstr;\ntypedef vector<double> vdbl;\ntypedef vector<ldbl> vldbl;\n#define pb push_back\n#define ppb pop_back\n#define pfr push_front\n#define ppfr pop_front\n#define emp emplace\n#define empb emplace_back\n#define be begin\n#define rbe rbegin\n#define all(x) (x).be(), (x).end()\n#define rall(x) (x).rbe(), (x).rend()\n#define fst first\n#define fir first\n#define sec second\n#define mkp make_pair\n#define brif(cond) if (cond) break\n#define ctif(cond) if (cond) continue\n#define retif(cond) if (cond) return\nstatic inline void canhazfast() {ios_base::sync_with_stdio(false);cin.tie(nullptr);cout.tie(nullptr);}\ntemplate<typename T> T gcd(T a, T b) {return b == 0 ? a : gcd(b, a%b);}\ntemplate<typename T> T extgcd(T a, T b, T &x, T &y)\n{\n    T x0 = 1, y0 = 0, x1 = 0, y1 = 1;\n    while (b) {\n        T q = a/b; a %= b; swap(a, b);\n        x0 -= q*x1; swap(x0, x1);\n        y0 -= q*y1; swap(y0, y1);\n    }\n    x = x0; y = y0; return a;\n}\nstatic inline int ctz(unsigned x) {return __builtin_ctz(x);}\nstatic inline int ctzll(ull x) {return __builtin_ctzll(x);}\nstatic inline int clz(unsigned x) {return __builtin_clz(x);}\nstatic inline int clzll(ull x) {return __builtin_clzll(x);}\nstatic inline int popcnt(unsigned x) {return __builtin_popcount(x);}\nstatic inline int popcntll(ull x) {return __builtin_popcountll(x);}\nstatic inline int bsr(unsigned x) {return 31^clz(x);}\nstatic inline int bsrll(ull x) {return 63^clzll(x);}\n\n#define MX 200016\n\nint main()\n{\n    canhazfast();\n\n    static int a[MX], x[2*MX], y[MX], pf[MX];\n    int n, m;\n    vi ans;\n\n    cin >> n >> m;\n    for (int i = 0; i < n; ++i) cin >> a[i];\n    for (int i = 0; i+1 < n; ++i) x[i] = a[i+1]-a[i];\n    x[n-1] = a[0]+m-a[n-1];\n    for (int i = 0, j = n-1; i < n; ++i, --j) x[n+i] = y[j] = x[i];\n    for (int i = 1, k = 0; i < n; ++i) {\n        while (k && y[i] != y[k]) k = pf[k];\n        if (y[i] == y[k]) ++k;\n        pf[i+1] = k;\n    }\n    for (int i = 0, k = 0; i < 2*n-1; ++i) {\n        while (k && x[i] != y[k]) k = pf[k];\n        if (x[i] == y[k]) ++k;\n        if (k == n) {\n            //cerr << \"match at i = \" << i-k+1 << '\\n';\n            ans.pb((a[0]+a[i-k+1])%m);\n            k = pf[k];\n        }\n    }\n    sort(all(ans));\n    cout << ans.size() << '\\n';\n    for (int v : ans) cout << v << ' ';\n\n    return 0;\n}\n"], "input": "", "output": "", "tags": [], "dificulty": "2400", "interactive": false}