{"link": "https://codeforces.com//contest/1219/problem/I", "problemId": "412350", "problem_idx": "I", "shortId": "1219I", "contest_number": "1219", "problem_submissions": {"I": [60646525], "G": [60642032], "C": [60637618], "D": [60636167], "A": [], "B": [], "E": [], "F": [], "H": []}, "name": "I. The Light Square", "statement": "For her birthday Alice received an interesting gift from her friends The\r\nLight Square. The Light Square game is played on an N\r\ntimes N lightbulbs square board with a magical lightbulb bar of size N\r\ntimes 1 that has magical properties. At the start of the game some\r\nlights on the square board and magical bar are turned on. The goal of\r\nthe game is to transform the starting light square board pattern into\r\nsome other pattern using the magical bar without rotating the square\r\nboard. The magical bar works as follows: It can be placed on any row or\r\ncolumn The orientation of the magical lightbulb must be left to right or\r\ntop to bottom for it to keep its magical properties The entire bar needs\r\nto be fully placed on a board The lights of the magical bar never change\r\nIf the light on the magical bar is the same as the light of the square\r\nit is placed on it will switch the light on the square board off,\r\notherwise it will switch the light on The magical bar can be used an\r\ninfinite number of times Alice has a hard time transforming her square\r\nboard into the pattern Bob gave her. Can you help her transform the\r\nboard or let her know it is impossible? If there are multiple solutions\r\nprint any.\r\n", "solutions": ["#include<bits/stdc++.h>\nusing namespace std;\ntypedef struct eq{\n    int x,y;\n    bool val;\n    int row, col;\n}Eq;\n\nint N;\nbool bd[2001][2001];\nbool pat[2001][2001];\nbool bar[2001];\n\nvector<Eq> eqs;\nint var[4002];\nbool solve(bool ini, int row_id){\n    // Initialize Val\n    for(int i=0;i<2*N;i++){\n        var[i] = -1;\n    }\n    var[row_id] = ini;\n    // Scan it for once to resolve all col variables\n    for(int i=0;i<eqs.size();i++){ // move downwards\n        int x = min(eqs[i].x, eqs[i].y), y = max(eqs[i].x, eqs[i].y), val = eqs[i].val;\n        // FATAL: unresolved equations\n        if(x!=-1 && y!=-1 && var[x]==-1 && var[y]==-1){\n            // Jump over unresolved equations;\n            continue;\n        }\n        if(x==-1 && y==-1){ // there is no var in the equation\n            if (val){\n                // cout << \"HAPPEN 1\" << endl;\n                // cout << \"x: \" << x << \" y: \" << y << endl;\n                return false;\n            }\n            continue;\n        }\n        if(x==-1){ // only has one variable y\n            if(var[y]==-1){\n                var[y] = val;\n            }else{\n                if(var[y]!=val){\n                    // cout << \"HAPPEN 2\" << endl;\n                    // cout << \"val[y]: \" << var[y] << endl;\n                    // cout << \"x: \" << x << \" y: \" << y << \" val: \" << val << endl;\n                    // cout << \"row: \" << eqs[i].row << \" col: \" << eqs[i].col << endl; \n                    return false;\n                }\n            }\n            continue;\n        }\n        // we have both variables\n        if (var[x]!=-1 && var[y]!=-1){ // both variables are known\n            if((var[x]^var[y])!=val){\n                // cout << \"HAPPEN 3\" << endl;\n                // cout << \"val[x]: \" << var[x] << endl;\n                // cout << \"val[y]: \" << var[y] << endl;\n                // cout << \"x: \" << x << \" y: \" << y << \" val: \" << val << endl;\n                // cout << \"row: \" << eqs[i].row << \" col: \" << eqs[i].col << endl; \n                return false;\n            }\n            continue;\n        }\n        if(var[x]==-1){ // the other must be known\n            assert(var[y]!=-1);\n            var[x] = val ^ var[y];\n            continue;\n        }\n        if(var[y]==-1){ // the ot\n            assert(var[x]!=-1);\n            var[y] = val ^ var[x];\n            continue;\n        }\n    }\n\n    // At this moment, all col var should be resolved\n\n    for(int i=0;i<eqs.size();i++){ // move downwards\n        int x = min(eqs[i].x, eqs[i].y), y = max(eqs[i].x, eqs[i].y), val = eqs[i].val;\n        // FATAL: unresolved equations\n        if(x!=-1 && y!=-1 && var[x]==-1 && var[y]==-1){\n            assert(false);\n        }\n        if(x==-1 && y==-1){ // there is no var in the equation\n            if (val){\n                // cout << \"HAPPEN 1\" << endl;\n                // cout << \"x: \" << x << \" y: \" << y << endl;\n                return false;\n            }\n            continue;\n        }\n        if(x==-1){ // only has one variable y\n            if(var[y]==-1){\n                var[y] = val;\n            }else{\n                if(var[y]!=val){\n                    // cout << \"HAPPEN 2\" << endl;\n                    // cout << \"val[y]: \" << var[y] << endl;\n                    // cout << \"x: \" << x << \" y: \" << y << \" val: \" << val << endl;\n                    // cout << \"row: \" << eqs[i].row << \" col: \" << eqs[i].col << endl; \n                    return false;\n                }\n            }\n            continue;\n        }\n        // we have both variables\n        if (var[x]!=-1 && var[y]!=-1){ // both variables are known\n            if((var[x]^var[y])!=val){\n                // cout << \"HAPPEN 3\" << endl;\n                // cout << \"val[x]: \" << var[x] << endl;\n                // cout << \"val[y]: \" << var[y] << endl;\n                // cout << \"x: \" << x << \" y: \" << y << \" val: \" << val << endl;\n                // cout << \"row: \" << eqs[i].row << \" col: \" << eqs[i].col << endl; \n                return false;\n            }\n            continue;\n        }\n        if(var[x]==-1){ // the other must be known\n            assert(var[y]!=-1);\n            var[x] = val ^ var[y];\n            continue;\n        }\n        if(var[y]==-1){ // the ot\n            assert(var[x]!=-1);\n            var[y] = val ^ var[x];\n            continue;\n        }\n    }\n    return true;\n}\nint main(void){\n    cin >> N;\n    // Read in board\n    string x;\n    for(int i=0;i<N;i++){\n        cin >> x;\n        for(int j=0;j<N;j++){\n            bd[i][j] = (x[j]=='1');\n        }\n    }\n    // Read in pat\n    for(int i=0;i<N;i++){\n        cin >> x;\n        for(int j=0;j<N;j++){\n            pat[i][j] = (x[j]=='1');\n        }\n    }\n    // Read in bar\n    cin >> x;\n    for(int i=0;i<N;i++){\n        bar[i] = (x[i] == '1');\n    }\n    \n    // Build the equations\n    for(int i=0;i<N;i++){\n        for(int j=0;j<N;j++){\n            Eq tmp = {-1, -1, true, -1, -1};\n            if(bar[j]){\n                tmp.x = i;\n            }\n            if(bar[i]){\n                tmp.y = N + j;\n            }\n\n            tmp.val = (bd[i][j] != pat[i][j]);\n            tmp.row = i;\n            tmp.col = j;\n            // cout << \"node: \" << i << \" \" << j << endl;\n            // cout << \"x: \" << tmp.x << \" y: \" << tmp.y << \" val: \" << tmp.val << endl;\n            eqs.push_back(tmp);\n        }\n    }\n    int tar=-1;\n    for(int i=0;i<N;i++){\n        if(bar[i]){\n            tar = i;\n            break;\n        }\n    }\n    if(tar==-1){\n        bool mk = true;\n        for(int i=0;i<N;i++){\n            for(int j=0;j<N;j++){\n                if(bd[i][j]!=pat[i][j]){\n                    mk = false;\n                    break;\n                }\n            }\n        }\n        if(mk){\n            cout << 0 << endl;\n        }else{\n            cout << -1 << endl;\n        }\n        return 0;\n    }\n\n    if(solve(true, tar)){\n        int cnt=0;\n        for(int i=0;i<2*N;i++){\n            if(var[i]){\n                cnt++;\n            }\n        }\n        cout << cnt << endl;\n        for(int i=0;i<N;i++){\n            if(var[i]){\n                cout << \"row \" << i << endl;\n            }\n        }\n        for(int i=N;i<2*N;i++){\n            if(var[i]){\n                cout << \"col \" << i-N << endl;\n            }\n        }\n        return 0;\n    }\n    if(solve(false, tar)){\n        int cnt=0;\n        for(int i=0;i<2*N;i++){\n            if(var[i]){\n                cnt++;\n            }\n        }\n        cout << cnt << endl;\n        for(int i=0;i<N;i++){\n            if(var[i]==1){\n                cout << \"row \" << i << endl;\n            }\n        }\n        for(int i=N;i<2*N;i++){\n            if(var[i]==1){\n                cout << \"col \" << i-N << endl;\n            }\n        }\n        return 0;\n    }\n    cout << -1 << endl;\n}"], "input": "", "output": "", "tags": ["2-sat", "greedy"], "dificulty": "2100", "interactive": false}