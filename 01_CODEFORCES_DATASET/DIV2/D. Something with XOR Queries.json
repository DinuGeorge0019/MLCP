{
    "link": "https://codeforces.com//contest/872/problem/D",
    "problemId": "128434",
    "problem_idx": "D",
    "shortId": "872D",
    "contest_number": "872",
    "problem_submissions": {
        "D": [
            31357405,
            31351452,
            31343107,
            31351195,
            31348275,
            31358936,
            31353320,
            31359729,
            31384542,
            31354719,
            31362020,
            31359730,
            31362352,
            31351225,
            31351202,
            31354247,
            31354449,
            31352162,
            31359781
        ],
        "E": [
            31353643,
            31348128,
            31351224,
            31359199,
            31354447,
            31355467,
            31348071,
            31351923,
            31353128,
            31362654,
            31354891,
            31382199
        ],
        "C": [
            31342341,
            31341124,
            31342335,
            31339634,
            31341933,
            31341621,
            31341040,
            31345564,
            31340156,
            31342837,
            31339872,
            31339992,
            31338872,
            31343484,
            31340713,
            31344350,
            31343999,
            31340760,
            31346573,
            31343301
        ],
        "B": [
            31339933,
            31344337,
            31346424,
            31335779,
            31338069,
            31340584,
            31337590,
            31339591,
            31336576,
            31337750,
            31336433,
            31336155,
            31344259,
            31336906,
            31343230,
            31338477,
            31343380,
            31338480,
            31339600,
            31336704
        ],
        "A": [
            31337113,
            31334461,
            31338251,
            31333648,
            31354746,
            31334723,
            31335437,
            31336234,
            31333965,
            31339158,
            31333483,
            31334206,
            31334052,
            31333255,
            31341935,
            31334681,
            31333872,
            31333828,
            31335202,
            31334321
        ]
    },
    "name": "D. Something with XOR Queries",
    "statement": "Jury has hidden a permutation of integers from to . You know only the\r\nlength . Remind that in permutation all integers are distinct.Let be the\r\ninverse permutation for , i.e. for all . The only thing you can do is to\r\nask of elements and , printing two indices and (not necessarily\r\ndistinct). As a result of the query with indices and youâ€™ll get the\r\nvalue , where denotes the operation. You can find the description of\r\noperation in notes.Note that some permutations can remain\r\nindistinguishable from the hidden one, even if you make all possible\r\nqueries. You have to compute the number of permutations\r\nindistinguishable from the hidden one, and print one of such\r\npermutations, making no more than queries.The hidden permutation does\r\nnot depend on your queries.\r\n",
    "solutions": [
        "#include<bits/stdc++.h>\n#define N 5010\nusing namespace std;\nint a[200010][3],pla[N<<1],fina[N<<1],now[N<<1];\nbool flag[N<<1];\nint n,ans;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;i++){\n\t\tprintf(\"? %d %d\\n\",i,(i+1)%n);\n\t\tfflush(stdout);\n\t\tscanf(\"%d\",&a[i][0]);\n\t\tprintf(\"? %d %d\\n\",(i+1)%n,(i+1)%n);\n\t\tfflush(stdout);\n\t\tscanf(\"%d\",&a[i][1]);\n\t}\n\tfor(int i=0;i<n;i++){\n\t\tpla[0]=i;\n\t\tfor(int j=1;j<n;j++) pla[j]=(pla[j-1]^a[j-1][0]^a[j-1][1]);\n\t\tmemset(flag,0,sizeof(flag));\n\t\tbool get_ans=1;\n\t\tfor(int j=0;j<n;j++){\n\t\t\tif(flag[pla[j]]==1) goto i_am_zcy_i_will_ak_noip;\n\t\t\telse flag[pla[j]]=1;\n\t\t}\n\t\tfor(int j=0;j<n;j++) now[pla[j]]=j;\n\t\tfor(int j=0;j<n;j++){\n\t\t    int k;\n\t\t    if(j==n-1) k=0;\n\t\t    else k=j+1;\n\t\t    if(((pla[j]^now[k])!=a[j][0])||((pla[k]^now[k])!=a[j][1]))\n\t\t    \tgoto i_am_zcy_i_will_ak_noip;\n\t\t}\n\t\tans++;\n\t\tmemcpy(fina, pla, sizeof(fina));\n\t\ti_am_zcy_i_will_ak_noip:;\n\t}\n\tprintf(\"!\\n\");\n\tfflush(stdout);\n\tprintf(\"%d\\n\",ans);\n\tfflush(stdout);\n\tif(ans==0) return 0;\n\tfor(int i=0;i<n;i++){\n\t\tprintf(\"%d \",fina[i]);\n\t\tfflush(stdout);\n\t}\n\treturn 0;\n}"
    ],
    "input": "",
    "output": "",
    "tags": [
        "brute force",
        "implementation",
        "interactive"
    ],
    "dificulty": "2000",
    "interactive": false,
    "file_name": "D:\\scoala\\RESEARCH\\MLCP\\01_CODEFORCES_DATASET\\DIV2\\D. Something with XOR Queries.json",
    "editorial_link": "https://codeforces.com//blog/entry/55200",
    "editorial": "The statement: those and only those permutations whose answers to the queries (0,?i) and (i,?0) for all i coincide with the answers given to the program, are suitable for all possible queries.\n\nThe proof: , which means that with the answers to the queries (0,?i) and (i,?0) you can restore the answers to all other queries.\n\nIf we fix the value b0, then we can restore the whole permutation, since we know the answers to the queries (i,?0), and .\n\nYou can iterate through the value b0, restore the whole permutation, and if there were no contradictions in it (that is, every number from 0 to n?-?1 occurs 1 time) and for all i values  and  coincide with the answers given to the program, then this permutation is indistinguishable from the hidden permutation.\n\nThe answer is the number of such permutations, and one of such permutations.",
    "hint": []
}